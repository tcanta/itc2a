
<!DOCTYPE html>


<html lang="en" data-content_root="../../../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>16. Full Grammar specification &#8212; Informatique de Tonc Commun 2A La Martin</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'payloads/payload1/Python-3.13.0rc2/Doc/reference/grammar';</script>
    <link rel="icon" href="../../../../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../../../_static/logo.png" class="logo__image only-light" alt="Informatique de Tonc Commun 2A La Martin - Home"/>
    <script>document.write(`<img src="../../../../../_static/logo.png" class="logo__image only-dark" alt="Informatique de Tonc Commun 2A La Martin - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../../../intro.html">
                    Informatique de Tronc Commun spé
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Révisions</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../../tp/tp_revisions.html">TP: Révisions de 1ère année</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Structures de Données</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../../../cours/cours_structures.html">Cours: Dictionnaires et ensembles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../td/dict_polynome.html">TD: Polynôme et dictionnaire</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tp/tp_structures.html">TP: Dictionnaires</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/tcanta/itc2a" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/tcanta/itc2a/issues/new?title=Issue%20on%20page%20%2Fpayloads/payload1/Python-3.13.0rc2/Doc/reference/grammar.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../../../_sources/payloads/payload1/Python-3.13.0rc2/Doc/reference/grammar.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Full Grammar specification</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="full-grammar-specification">
<span id="id1"></span><h1><span class="section-number">16. </span>Full Grammar specification<a class="headerlink" href="#full-grammar-specification" title="Link to this heading">#</a></h1>
<p>This is the full Python grammar, derived directly from the grammar
used to generate the CPython parser (see <a href="#id2"><span class="problematic" id="id3">:source:`Grammar/python.gram`</span></a>).
The version here omits details related to code generation and
error recovery.</p>
<p>The notation is a mixture of <a class="reference external" href="https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form">EBNF</a>
and <a class="reference external" href="https://en.wikipedia.org/wiki/Parsing_expression_grammar">PEG</a>.
In particular, <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> followed by a symbol, token or parenthesized
group indicates a positive lookahead (i.e., is required to match but
not consumed), while <code class="docutils literal notranslate"><span class="pre">!</span></code> indicates a negative lookahead (i.e., is
required <em>not</em> to match).  We use the <code class="docutils literal notranslate"><span class="pre">|</span></code> separator to mean PEG’s
“ordered choice” (written as <code class="docutils literal notranslate"><span class="pre">/</span></code> in traditional PEG grammars). See
<span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0617/"><strong>PEP 617</strong></a> for more details on the grammar’s syntax.</p>
<div class="highlight-peg notranslate"><div class="highlight"><pre><span></span><span class="c1"># PEG grammar for Python</span>

<span class="nc">@trailer</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">void *</span>
<span class="s1">_PyPegen_parse(Parser *p)</span>
<span class="s1">{</span>
<span class="s1">    // Initialize keywords</span>
<span class="s1">    p-&gt;keywords = reserved_keywords;</span>
<span class="s1">    p-&gt;n_keyword_lists = n_keyword_lists;</span>
<span class="s1">    p-&gt;soft_keywords = soft_keywords;</span>

<span class="s1">    // Run parser</span>
<span class="s1">    void *result = NULL;</span>
<span class="s1">    if (p-&gt;start_rule == Py_file_input) {</span>
<span class="s1">        result = file_rule(p);</span>
<span class="s1">    } else if (p-&gt;start_rule == Py_single_input) {</span>
<span class="s1">        result = interactive_rule(p);</span>
<span class="s1">    } else if (p-&gt;start_rule == Py_eval_input) {</span>
<span class="s1">        result = eval_rule(p);</span>
<span class="s1">    } else if (p-&gt;start_rule == Py_func_type_input) {</span>
<span class="s1">        result = func_type_rule(p);</span>
<span class="s1">    }</span>

<span class="s1">    return result;</span>
<span class="s1">}</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="c1"># ========================= START OF THE GRAMMAR =========================</span>

<span class="c1"># General grammatical elements and rules:</span>
<span class="c1">#</span>
<span class="c1"># * Strings with double quotes (&quot;) denote SOFT KEYWORDS</span>
<span class="c1"># * Strings with single quotes (&#39;) denote KEYWORDS</span>
<span class="c1"># * Upper case names (NAME) denote tokens in the Grammar/Tokens file</span>
<span class="c1"># * Rule names starting with &quot;invalid_&quot; are used for specialized syntax errors</span>
<span class="c1">#     - These rules are NOT used in the first pass of the parser.</span>
<span class="c1">#     - Only if the first pass fails to parse, a second pass including the invalid</span>
<span class="c1">#       rules will be executed.</span>
<span class="c1">#     - If the parser fails in the second phase with a generic syntax error, the</span>
<span class="c1">#       location of the generic failure of the first pass will be used (this avoids</span>
<span class="c1">#       reporting incorrect locations due to the invalid rules).</span>
<span class="c1">#     - The order of the alternatives involving invalid rules matter</span>
<span class="c1">#       (like any rule in PEG).</span>
<span class="c1">#</span>
<span class="c1"># Grammar Syntax (see PEP 617 for more information):</span>
<span class="c1">#</span>
<span class="c1"># rule_name: expression</span>
<span class="c1">#   Optionally, a type can be included right after the rule name, which</span>
<span class="c1">#   specifies the return type of the C or Python function corresponding to the</span>
<span class="c1">#   rule:</span>
<span class="c1"># rule_name[return_type]: expression</span>
<span class="c1">#   If the return type is omitted, then a void * is returned in C and an Any in</span>
<span class="c1">#   Python.</span>
<span class="c1"># e1 e2</span>
<span class="c1">#   Match e1, then match e2.</span>
<span class="c1"># e1 | e2</span>
<span class="c1">#   Match e1 or e2.</span>
<span class="c1">#   The first alternative can also appear on the line after the rule name for</span>
<span class="c1">#   formatting purposes. In that case, a | must be used before the first</span>
<span class="c1">#   alternative, like so:</span>
<span class="c1">#       rule_name[return_type]:</span>
<span class="c1">#            | first_alt</span>
<span class="c1">#            | second_alt</span>
<span class="c1"># ( e )</span>
<span class="c1">#   Match e (allows also to use other operators in the group like &#39;(e)*&#39;)</span>
<span class="c1"># [ e ] or e?</span>
<span class="c1">#   Optionally match e.</span>
<span class="c1"># e*</span>
<span class="c1">#   Match zero or more occurrences of e.</span>
<span class="c1"># e+</span>
<span class="c1">#   Match one or more occurrences of e.</span>
<span class="c1"># s.e+</span>
<span class="c1">#   Match one or more occurrences of e, separated by s. The generated parse tree</span>
<span class="c1">#   does not include the separator. This is otherwise identical to (e (s e)*).</span>
<span class="c1"># &amp;e</span>
<span class="c1">#   Succeed if e can be parsed, without consuming any input.</span>
<span class="c1"># !e</span>
<span class="c1">#   Fail if e can be parsed, without consuming any input.</span>
<span class="c1"># ~</span>
<span class="c1">#   Commit to the current alternative, even if it fails to parse.</span>
<span class="c1"># &amp;&amp;e</span>
<span class="c1">#   Eager parse e. The parser will not backtrack and will immediately </span>
<span class="c1">#   fail with SyntaxError if e cannot be parsed.</span>
<span class="c1">#</span>

<span class="c1"># STARTING RULES</span>
<span class="c1"># ==============</span>

<span class="nc">file</span><span class="p">[</span><span class="s">mod_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">statements</span><span class="p">]</span> <span class="nc">ENDMARKER</span> <span class="nc">{</span> <span class="nc">_PyPegen_make_module</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">interactive</span><span class="p">[</span><span class="s">mod_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">statement_newline</span> <span class="nc">{</span> <span class="nc">_PyAST_Interactive</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">p-&gt;arena</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">eval</span><span class="p">[</span><span class="s">mod_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expressions</span> <span class="nc">NEWLINE</span><span class="o">*</span> <span class="nc">ENDMARKER</span> <span class="nc">{</span> <span class="nc">_PyAST_Expression</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">p-&gt;arena</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">func_type</span><span class="p">[</span><span class="s">mod_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">type_expressions</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="s1">&#39;-&gt;&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">NEWLINE</span><span class="o">*</span> <span class="nc">ENDMARKER</span> <span class="nc">{</span> <span class="nc">_PyAST_FunctionType</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">p-&gt;arena</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># GENERAL STATEMENTS</span>
<span class="c1"># ==================</span>

<span class="nc">statements</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">statement</span><span class="o">+</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_stmt_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_seq_flatten</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">statement</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">compound_stmt</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_stmt_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span> <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">simple_stmts</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">statement_newline</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">compound_stmt</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_stmt_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">simple_stmts</span>
    <span class="o">|</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_stmt_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">stmt_ty,</span> <span class="nc">_PyAST_Pass</span><span class="p">(</span><span class="nc">EXTRA</span><span class="p">)))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">ENDMARKER</span> <span class="nc">{</span> <span class="nc">_PyPegen_interactive_exit</span><span class="p">(</span><span class="nc">p</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">simple_stmts</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">simple_stmt</span> <span class="o">!</span><span class="s1">&#39;;&#39;</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_stmt_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span> <span class="c1"># Not needed, there for speedup</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;;&#39;</span><span class="k">.</span><span class="nc">simple_stmt</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;;&#39;</span><span class="p">]</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="c1"># NOTE: assignment MUST precede expression, else parsing a simple assignment</span>
<span class="c1"># will throw a SyntaxError.</span>
<span class="nc">simple_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">assignment</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s2">&quot;type&quot;</span> <span class="nc">type_alias</span>
    <span class="o">|</span> <span class="nc">e</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="nc">{</span> <span class="nc">_PyAST_Expr</span><span class="p">(</span><span class="nc">e,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;return&#39;</span> <span class="nc">return_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;import&#39;</span> <span class="o">|</span> <span class="s1">&#39;from&#39;</span><span class="p">)</span> <span class="nc">import_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;raise&#39;</span> <span class="nc">raise_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;pass&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Pass</span><span class="p">(</span><span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;del&#39;</span> <span class="nc">del_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;yield&#39;</span> <span class="nc">yield_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;assert&#39;</span> <span class="nc">assert_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;break&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Break</span><span class="p">(</span><span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;continue&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Continue</span><span class="p">(</span><span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;global&#39;</span> <span class="nc">global_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;nonlocal&#39;</span> <span class="nc">nonlocal_stmt</span>

<span class="nc">compound_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;def&#39;</span> <span class="o">|</span> <span class="s1">&#39;@&#39;</span> <span class="o">|</span> <span class="s1">&#39;async&#39;</span><span class="p">)</span> <span class="nc">function_def</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;if&#39;</span> <span class="nc">if_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;class&#39;</span> <span class="o">|</span> <span class="s1">&#39;@&#39;</span><span class="p">)</span> <span class="nc">class_def</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;with&#39;</span> <span class="o">|</span> <span class="s1">&#39;async&#39;</span><span class="p">)</span> <span class="nc">with_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;for&#39;</span> <span class="o">|</span> <span class="s1">&#39;async&#39;</span><span class="p">)</span> <span class="nc">for_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;try&#39;</span> <span class="nc">try_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;while&#39;</span> <span class="nc">while_stmt</span>
    <span class="o">|</span> <span class="nc">match_stmt</span>

<span class="c1"># SIMPLE STATEMENTS</span>
<span class="c1"># =================</span>

<span class="c1"># NOTE: annotated_rhs may start with &#39;yield&#39;; yield_expr must start with &#39;yield&#39;</span>
<span class="nc">assignment</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;=&#39; d=annotated_rhs { d }</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span>
            <span class="nc">stmt_ty,</span>
            <span class="nc">6,</span>
            <span class="s2">&quot;Variable annotation syntax is&quot;</span><span class="nc">,</span>
            <span class="nc">_PyAST_AnnAssign</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">expr_ty,</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Store</span><span class="p">))</span><span class="nc">,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">1,</span> <span class="nc">EXTRA</span><span class="p">)</span>
        <span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;(&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">single_target</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">b</span> <span class="nc">}</span>
         <span class="o">|</span> <span class="nc">single_subscript_attribute_target</span><span class="p">)</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;=&#39; d=annotated_rhs { d }</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">stmt_ty,</span> <span class="nc">6,</span> <span class="s2">&quot;Variable annotations syntax is&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_AnnAssign</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">0,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="nc">z</span><span class="o">=</span><span class="nc">star_targets</span> <span class="s1">&#39;=&#39;</span> <span class="nc">{</span> <span class="nc">z</span> <span class="nc">}</span><span class="p">)</span><span class="o">+</span> <span class="nc">b</span><span class="o">=</span><span class="p">(</span><span class="nc">yield_expr</span> <span class="o">|</span> <span class="nc">star_expressions</span><span class="p">)</span> <span class="o">!</span><span class="s1">&#39;=&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">TYPE_COMMENT</span><span class="p">]</span> <span class="nc">{</span>
         <span class="nc">_PyAST_Assign</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">single_target</span> <span class="nc">b</span><span class="o">=</span><span class="nc">augassign</span> <span class="o">~</span> <span class="nc">c</span><span class="o">=</span><span class="p">(</span><span class="nc">yield_expr</span> <span class="o">|</span> <span class="nc">star_expressions</span><span class="p">)</span> <span class="nc">{</span>
         <span class="nc">_PyAST_AugAssign</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b-&gt;kind,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_assignment</span>

<span class="nc">annotated_rhs</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">yield_expr</span> <span class="o">|</span> <span class="nc">star_expressions</span>

<span class="nc">augassign</span><span class="p">[</span><span class="s">AugOperator*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;+=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Add</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;-=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Sub</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Mult</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;@=&#39;</span> <span class="nc">{</span> <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">AugOperator</span><span class="o">*</span><span class="nc">,</span> <span class="nc">5,</span> <span class="s2">&quot;The &#39;@&#39; operator is&quot;</span><span class="nc">,</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">MatMult</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;/=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Div</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;%=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Mod</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;&amp;=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">BitAnd</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;|=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">BitOr</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;^=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">BitXor</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;&lt;&lt;=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">LShift</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;&gt;&gt;=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">RShift</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;**=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Pow</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;//=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">FloorDiv</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">return_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;return&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">star_expressions</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_Return</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">raise_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;raise&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;from&#39; z=expression { z }</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_Raise</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;raise&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Raise</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">global_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;global&#39;</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">NAME</span><span class="o">+</span> <span class="nc">{</span>
    <span class="nc">_PyAST_Global</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_identifier_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_map_names_to_ids</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">nonlocal_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;nonlocal&#39;</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">NAME</span><span class="o">+</span> <span class="nc">{</span>
    <span class="nc">_PyAST_Nonlocal</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_identifier_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_map_names_to_ids</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">del_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;del&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">del_targets</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;;&#39;</span> <span class="o">|</span> <span class="nc">NEWLINE</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">_PyAST_Delete</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_del_stmt</span>

<span class="nc">yield_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">y</span><span class="o">=</span><span class="nc">yield_expr</span> <span class="nc">{</span> <span class="nc">_PyAST_Expr</span><span class="p">(</span><span class="nc">y,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">assert_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;assert&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;,&#39; z=expression { z }</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_Assert</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">import_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_import</span>
    <span class="o">|</span> <span class="nc">import_name</span>
    <span class="o">|</span> <span class="nc">import_from</span>

<span class="c1"># Import statements</span>
<span class="c1"># -----------------</span>

<span class="nc">import_name</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;import&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">dotted_as_names</span> <span class="nc">{</span> <span class="nc">_PyAST_Import</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="c1"># note below: the (&#39;.&#39; | &#39;...&#39;) is necessary because &#39;...&#39; is tokenized as ELLIPSIS</span>
<span class="nc">import_from</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;from&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">|</span> <span class="s1">&#39;...&#39;</span><span class="p">)</span><span class="o">*</span> <span class="nc">b</span><span class="o">=</span><span class="nc">dotted_name</span> <span class="s1">&#39;import&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">import_from_targets</span> <span class="nc">{</span>
        <span class="nc">_PyAST_ImportFrom</span><span class="p">(</span><span class="nc">b-&gt;v.Name.id,</span> <span class="nc">c,</span> <span class="nc">_PyPegen_seq_count_dots</span><span class="p">(</span><span class="nc">a</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;from&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">|</span> <span class="s1">&#39;...&#39;</span><span class="p">)</span><span class="o">+</span> <span class="s1">&#39;import&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">import_from_targets</span> <span class="nc">{</span>
        <span class="nc">_PyAST_ImportFrom</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">_PyPegen_seq_count_dots</span><span class="p">(</span><span class="nc">a</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">import_from_targets</span><span class="p">[</span><span class="s">asdl_alias_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">import_from_as_names</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">import_from_as_names</span> <span class="o">!</span><span class="s1">&#39;,&#39;</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_alias_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">alias_ty,</span> <span class="nc">_PyPegen_alias_for_star</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">EXTRA</span><span class="p">)))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_import_from_targets</span>
<span class="nc">import_from_as_names</span><span class="p">[</span><span class="s">asdl_alias_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_alias_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">import_from_as_name</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">import_from_as_name</span><span class="p">[</span><span class="s">alias_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;as&#39; z=NAME { z }</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_alias</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span>
                                               <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Name.id</span> <span class="o">:</span> <span class="nc">NULL,</span>
                                               <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">dotted_as_names</span><span class="p">[</span><span class="s">asdl_alias_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_alias_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">dotted_as_name</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">dotted_as_name</span><span class="p">[</span><span class="s">alias_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">dotted_name</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;as&#39; z=NAME { z }</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_alias</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span>
                                                      <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Name.id</span> <span class="o">:</span> <span class="nc">NULL,</span>
                                                      <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">dotted_name</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">dotted_name</span> <span class="s1">&#39;.&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span> <span class="nc">_PyPegen_join_names_with_dot</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">NAME</span>

<span class="c1"># COMPOUND STATEMENTS</span>
<span class="c1"># ===================</span>

<span class="c1"># Common elements</span>
<span class="c1"># ---------------</span>

<span class="nc">block</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">NEWLINE</span> <span class="nc">INDENT</span> <span class="nc">a</span><span class="o">=</span><span class="nc">statements</span> <span class="nc">DEDENT</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">simple_stmts</span>
    <span class="o">|</span> <span class="nc">invalid_block</span>

<span class="nc">decorators</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;@&#39;</span> <span class="nc">f</span><span class="o">=</span><span class="nc">named_expression</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">f</span> <span class="nc">}</span><span class="p">)</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="c1"># Class definitions</span>
<span class="c1"># -----------------</span>

<span class="nc">class_def</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">decorators</span> <span class="nc">b</span><span class="o">=</span><span class="nc">class_def_raw</span> <span class="nc">{</span> <span class="nc">_PyPegen_class_def_decorators</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">class_def_raw</span>

<span class="nc">class_def_raw</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_class_def_raw</span>
    <span class="o">|</span> <span class="s1">&#39;class&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">t</span><span class="o">=</span><span class="p">[</span><span class="s">type_params</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;(&#39; z=[arguments</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">z</span> <span class="nc">}</span>] <span class="s1">&#39;:&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
        <span class="nc">_PyAST_ClassDef</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span>
                     <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Call.args</span> <span class="o">:</span> <span class="nc">NULL,</span>
                     <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Call.keywords</span> <span class="o">:</span> <span class="nc">NULL,</span>
                     <span class="nc">c,</span> <span class="nc">NULL,</span> <span class="nc">t,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Function definitions</span>
<span class="c1"># --------------------</span>

<span class="nc">function_def</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">d</span><span class="o">=</span><span class="nc">decorators</span> <span class="nc">f</span><span class="o">=</span><span class="nc">function_def_raw</span> <span class="nc">{</span> <span class="nc">_PyPegen_function_def_decorators</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">d,</span> <span class="nc">f</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">function_def_raw</span>

<span class="nc">function_def_raw</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_def_raw</span>
    <span class="o">|</span> <span class="s1">&#39;def&#39;</span> <span class="nc">n</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">t</span><span class="o">=</span><span class="p">[</span><span class="s">type_params</span><span class="p">]</span> <span class="s1">&#39;(&#39;</span> <span class="nc">params</span><span class="o">=</span><span class="p">[</span><span class="s">params</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;-&gt;&#39; z=expression { z }</span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">func_type_comment</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
        <span class="nc">_PyAST_FunctionDef</span><span class="p">(</span><span class="nc">n-&gt;v.Name.id,</span>
                        <span class="p">(</span><span class="nc">params</span><span class="p">)</span> <span class="o">?</span> <span class="nc">params</span> <span class="o">:</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">arguments_ty,</span> <span class="nc">_PyPegen_empty_arguments</span><span class="p">(</span><span class="nc">p</span><span class="p">))</span><span class="nc">,</span>
                        <span class="nc">b,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">t,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;async&#39;</span> <span class="s1">&#39;def&#39;</span> <span class="nc">n</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">t</span><span class="o">=</span><span class="p">[</span><span class="s">type_params</span><span class="p">]</span> <span class="s1">&#39;(&#39;</span> <span class="nc">params</span><span class="o">=</span><span class="p">[</span><span class="s">params</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;-&gt;&#39; z=expression { z }</span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">func_type_comment</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span>
            <span class="nc">stmt_ty,</span>
            <span class="nc">5,</span>
            <span class="s2">&quot;Async functions are&quot;</span><span class="nc">,</span>
            <span class="nc">_PyAST_AsyncFunctionDef</span><span class="p">(</span><span class="nc">n-&gt;v.Name.id,</span>
                            <span class="p">(</span><span class="nc">params</span><span class="p">)</span> <span class="o">?</span> <span class="nc">params</span> <span class="o">:</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">arguments_ty,</span> <span class="nc">_PyPegen_empty_arguments</span><span class="p">(</span><span class="nc">p</span><span class="p">))</span><span class="nc">,</span>
                            <span class="nc">b,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">t,</span> <span class="nc">EXTRA</span><span class="p">)</span>
        <span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Function parameters</span>
<span class="c1"># -------------------</span>

<span class="nc">params</span><span class="p">[</span><span class="s">arguments_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_parameters</span>
    <span class="o">|</span> <span class="nc">parameters</span>

<span class="nc">parameters</span><span class="p">[</span><span class="s">arguments_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">slash_no_default</span> <span class="nc">b</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">param_no_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="nc">param_with_default</span><span class="o">*</span> <span class="nc">d</span><span class="o">=</span><span class="p">[</span><span class="s">star_etc</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">arguments_ty,</span> <span class="nc">8,</span> <span class="s2">&quot;Positional-only parameters are&quot;</span><span class="nc">,</span> <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">d</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">slash_with_default</span> <span class="nc">b</span><span class="o">=</span><span class="nc">param_with_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">star_etc</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">arguments_ty,</span> <span class="nc">8,</span> <span class="s2">&quot;Positional-only parameters are&quot;</span><span class="nc">,</span> <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">param_no_default</span><span class="o">+</span> <span class="nc">b</span><span class="o">=</span><span class="nc">param_with_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">star_etc</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_with_default</span><span class="o">+</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">star_etc</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span><span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_etc</span> <span class="nc">{</span> <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Some duplication here because we can&#39;t write (&#39;,&#39; | &amp;&#39;)&#39;),</span>
<span class="c1"># which is because we don&#39;t support empty alternatives (yet).</span>

<span class="nc">slash_no_default</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">param_no_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">param_no_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">&amp;</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">slash_with_default</span><span class="p">[</span><span class="s">SlashWithDefault*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_no_default</span><span class="o">*</span> <span class="nc">b</span><span class="o">=</span><span class="nc">param_with_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_slash_with_default</span><span class="p">(</span><span class="nc">p,</span> <span class="p">(</span><span class="nc">asdl_arg_seq</span> <span class="o">*</span><span class="p">)</span><span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_no_default</span><span class="o">*</span> <span class="nc">b</span><span class="o">=</span><span class="nc">param_with_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">&amp;</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_slash_with_default</span><span class="p">(</span><span class="nc">p,</span> <span class="p">(</span><span class="nc">asdl_arg_seq</span> <span class="o">*</span><span class="p">)</span><span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">star_etc</span><span class="p">[</span><span class="s">StarEtc*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_star_etc</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_no_default</span> <span class="nc">b</span><span class="o">=</span><span class="nc">param_maybe_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">kwds</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_star_etc</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_no_default_star_annotation</span> <span class="nc">b</span><span class="o">=</span><span class="nc">param_maybe_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">kwds</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_star_etc</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">param_maybe_default</span><span class="o">+</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">kwds</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_star_etc</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">kwds</span> <span class="nc">{</span> <span class="nc">_PyPegen_star_etc</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">kwds</span><span class="p">[</span><span class="s">arg_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_kwds</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_no_default</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="c1"># One parameter.  This *includes* a following comma and type comment.</span>
<span class="c1">#</span>
<span class="c1"># There are three styles:</span>
<span class="c1"># - No default</span>
<span class="c1"># - With default</span>
<span class="c1"># - Maybe with default</span>
<span class="c1">#</span>
<span class="c1"># There are two alternative forms of each, to deal with type comments:</span>
<span class="c1"># - Ends in a comma followed by an optional type comment</span>
<span class="c1"># - No comma, optional type comment, must be followed by close paren</span>
<span class="c1"># The latter form is for a final parameter without trailing comma.</span>
<span class="c1">#</span>

<span class="nc">param_no_default</span><span class="p">[</span><span class="s">arg_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param</span> <span class="s1">&#39;,&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span><span class="o">?</span> <span class="nc">{</span> <span class="nc">_PyPegen_add_type_comment_to_arg</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">tc</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param</span> <span class="nc">tc</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span><span class="o">?</span> <span class="o">&amp;</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_add_type_comment_to_arg</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">tc</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">param_no_default_star_annotation</span><span class="p">[</span><span class="s">arg_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_star_annotation</span> <span class="s1">&#39;,&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span><span class="o">?</span> <span class="nc">{</span> <span class="nc">_PyPegen_add_type_comment_to_arg</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">tc</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_star_annotation</span> <span class="nc">tc</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span><span class="o">?</span> <span class="o">&amp;</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_add_type_comment_to_arg</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">tc</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">param_with_default</span><span class="p">[</span><span class="s">NameDefaultPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span> <span class="s1">&#39;,&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span><span class="o">?</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">tc</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span> <span class="nc">tc</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span><span class="o">?</span> <span class="o">&amp;</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">tc</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">param_maybe_default</span><span class="p">[</span><span class="s">NameDefaultPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span><span class="o">?</span> <span class="s1">&#39;,&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span><span class="o">?</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">tc</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span><span class="o">?</span> <span class="nc">tc</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span><span class="o">?</span> <span class="o">&amp;</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">tc</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">param</span><span class="p">[</span><span class="s">arg_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">b</span><span class="o">=</span><span class="nc">annotation</span><span class="o">?</span> <span class="nc">{</span> <span class="nc">_PyAST_arg</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span> <span class="nc">b,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">param_star_annotation</span><span class="p">[</span><span class="s">arg_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">b</span><span class="o">=</span><span class="nc">star_annotation</span> <span class="nc">{</span> <span class="nc">_PyAST_arg</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span> <span class="nc">b,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">annotation</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;:&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">star_annotation</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;:&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_expression</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">default</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;=&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span> <span class="o">|</span> <span class="nc">invalid_default</span>

<span class="c1"># If statement</span>
<span class="c1"># ------------</span>

<span class="nc">if_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_if_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;if&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">c</span><span class="o">=</span><span class="nc">elif_stmt</span> <span class="nc">{</span>
        <span class="nc">_PyAST_If</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_stmt_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">c</span><span class="p">))</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;if&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">else_block</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_If</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">elif_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_elif_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;elif&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">c</span><span class="o">=</span><span class="nc">elif_stmt</span> <span class="nc">{</span>
        <span class="nc">_PyAST_If</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_stmt_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">c</span><span class="p">))</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;elif&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">else_block</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_If</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">else_block</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_else_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;else&#39;</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span> <span class="nc">b</span> <span class="nc">}</span>

<span class="c1"># While statement</span>
<span class="c1"># ---------------</span>

<span class="nc">while_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_while_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;while&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">else_block</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_While</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># For statement</span>
<span class="c1"># -------------</span>

<span class="nc">for_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_for_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;for&#39;</span> <span class="nc">t</span><span class="o">=</span><span class="nc">star_targets</span> <span class="s1">&#39;in&#39;</span> <span class="o">~</span> <span class="nc">ex</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="s1">&#39;:&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">TYPE_COMMENT</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">el</span><span class="o">=</span><span class="p">[</span><span class="s">else_block</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyAST_For</span><span class="p">(</span><span class="nc">t,</span> <span class="nc">ex,</span> <span class="nc">b,</span> <span class="nc">el,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;async&#39;</span> <span class="s1">&#39;for&#39;</span> <span class="nc">t</span><span class="o">=</span><span class="nc">star_targets</span> <span class="s1">&#39;in&#39;</span> <span class="o">~</span> <span class="nc">ex</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="s1">&#39;:&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">TYPE_COMMENT</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">el</span><span class="o">=</span><span class="p">[</span><span class="s">else_block</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">stmt_ty,</span> <span class="nc">5,</span> <span class="s2">&quot;Async for loops are&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_AsyncFor</span><span class="p">(</span><span class="nc">t,</span> <span class="nc">ex,</span> <span class="nc">b,</span> <span class="nc">el,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_for_target</span>

<span class="c1"># With statement</span>
<span class="c1"># --------------</span>

<span class="nc">with_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_with_stmt_indent</span>
    <span class="o">|</span> <span class="s1">&#39;with&#39;</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_withitem_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">with_item</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">TYPE_COMMENT</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
       <span class="nc">_PyAST_With</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;with&#39;</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_withitem_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">with_item</span><span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">TYPE_COMMENT</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
        <span class="nc">_PyAST_With</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;async&#39;</span> <span class="s1">&#39;with&#39;</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_withitem_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">with_item</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
       <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">stmt_ty,</span> <span class="nc">5,</span> <span class="s2">&quot;Async with statements are&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_AsyncWith</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;async&#39;</span> <span class="s1">&#39;with&#39;</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_withitem_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">with_item</span><span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">TYPE_COMMENT</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
       <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">stmt_ty,</span> <span class="nc">5,</span> <span class="s2">&quot;Async with statements are&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_AsyncWith</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_with_stmt</span>

<span class="nc">with_item</span><span class="p">[</span><span class="s">withitem_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">e</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;as&#39;</span> <span class="nc">t</span><span class="o">=</span><span class="nc">star_target</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="o">|</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span> <span class="s1">&#39;:&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">_PyAST_withitem</span><span class="p">(</span><span class="nc">e,</span> <span class="nc">t,</span> <span class="nc">p-&gt;arena</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_with_item</span>
    <span class="o">|</span> <span class="nc">e</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyAST_withitem</span><span class="p">(</span><span class="nc">e,</span> <span class="nc">NULL,</span> <span class="nc">p-&gt;arena</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Try statement</span>
<span class="c1"># -------------</span>

<span class="nc">try_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_try_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;try&#39;</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">f</span><span class="o">=</span><span class="nc">finally_block</span> <span class="nc">{</span> <span class="nc">_PyAST_Try</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">f,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;try&#39;</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">ex</span><span class="p">[</span><span class="s">asdl_excepthandler_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">except_block</span><span class="o">+</span> <span class="nc">el</span><span class="o">=</span><span class="p">[</span><span class="s">else_block</span><span class="p">]</span> <span class="nc">f</span><span class="o">=</span><span class="p">[</span><span class="s">finally_block</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_Try</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">ex,</span> <span class="nc">el,</span> <span class="nc">f,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;try&#39;</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">ex</span><span class="p">[</span><span class="s">asdl_excepthandler_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">except_star_block</span><span class="o">+</span> <span class="nc">el</span><span class="o">=</span><span class="p">[</span><span class="s">else_block</span><span class="p">]</span> <span class="nc">f</span><span class="o">=</span><span class="p">[</span><span class="s">finally_block</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">stmt_ty,</span> <span class="nc">11,</span> <span class="s2">&quot;Exception groups are&quot;</span><span class="nc">,</span>
                      <span class="nc">_PyAST_TryStar</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">ex,</span> <span class="nc">el,</span> <span class="nc">f,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>


<span class="c1"># Except statement</span>
<span class="c1"># ----------------</span>

<span class="nc">except_block</span><span class="p">[</span><span class="s">excepthandler_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_except_stmt_indent</span>
    <span class="o">|</span> <span class="s1">&#39;except&#39;</span> <span class="nc">e</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">t</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;as&#39; z=NAME { z }</span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
        <span class="nc">_PyAST_ExceptHandler</span><span class="p">(</span><span class="nc">e,</span> <span class="p">(</span><span class="nc">t</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">t</span><span class="p">)</span><span class="nc">-&gt;v.Name.id</span> <span class="o">:</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;except&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span> <span class="nc">_PyAST_ExceptHandler</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_except_stmt</span>
<span class="nc">except_star_block</span><span class="p">[</span><span class="s">excepthandler_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_except_star_stmt_indent</span>
    <span class="o">|</span> <span class="s1">&#39;except&#39;</span> <span class="s1">&#39;*&#39;</span> <span class="nc">e</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">t</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;as&#39; z=NAME { z }</span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
        <span class="nc">_PyAST_ExceptHandler</span><span class="p">(</span><span class="nc">e,</span> <span class="p">(</span><span class="nc">t</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">t</span><span class="p">)</span><span class="nc">-&gt;v.Name.id</span> <span class="o">:</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_except_stmt</span>
<span class="nc">finally_block</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_finally_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;finally&#39;</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="c1"># Match statement</span>
<span class="c1"># ---------------</span>

<span class="nc">match_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s2">&quot;match&quot;</span> <span class="nc">subject</span><span class="o">=</span><span class="nc">subject_expr</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="nc">INDENT</span> <span class="nc">cases</span><span class="p">[</span><span class="s">asdl_match_case_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">case_block</span><span class="o">+</span> <span class="nc">DEDENT</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">stmt_ty,</span> <span class="nc">10,</span> <span class="s2">&quot;Pattern matching is&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_Match</span><span class="p">(</span><span class="nc">subject,</span> <span class="nc">cases,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_match_stmt</span>

<span class="nc">subject_expr</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">value</span><span class="o">=</span><span class="nc">star_named_expression</span> <span class="s1">&#39;,&#39;</span> <span class="nc">values</span><span class="o">=</span><span class="nc">star_named_expressions</span><span class="o">?</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">value,</span> <span class="nc">values</span><span class="p">))</span><span class="nc">,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">named_expression</span>

<span class="nc">case_block</span><span class="p">[</span><span class="s">match_case_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_case_block</span>
    <span class="o">|</span> <span class="s2">&quot;case&quot;</span> <span class="nc">pattern</span><span class="o">=</span><span class="nc">patterns</span> <span class="nc">guard</span><span class="o">=</span><span class="nc">guard</span><span class="o">?</span> <span class="s1">&#39;:&#39;</span> <span class="nc">body</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
        <span class="nc">_PyAST_match_case</span><span class="p">(</span><span class="nc">pattern,</span> <span class="nc">guard,</span> <span class="nc">body,</span> <span class="nc">p-&gt;arena</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">guard</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;if&#39;</span> <span class="nc">guard</span><span class="o">=</span><span class="nc">named_expression</span> <span class="nc">{</span> <span class="nc">guard</span> <span class="nc">}</span>

<span class="nc">patterns</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">patterns</span><span class="p">[</span><span class="s">asdl_pattern_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">open_sequence_pattern</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchSequence</span><span class="p">(</span><span class="nc">patterns,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">pattern</span>

<span class="nc">pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">as_pattern</span>
    <span class="o">|</span> <span class="nc">or_pattern</span>

<span class="nc">as_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">pattern</span><span class="o">=</span><span class="nc">or_pattern</span> <span class="s1">&#39;as&#39;</span> <span class="nc">target</span><span class="o">=</span><span class="nc">pattern_capture_target</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchAs</span><span class="p">(</span><span class="nc">pattern,</span> <span class="nc">target-&gt;v.Name.id,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_as_pattern</span>

<span class="nc">or_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">patterns</span><span class="p">[</span><span class="s">asdl_pattern_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;|&#39;</span><span class="k">.</span><span class="nc">closed_pattern</span><span class="o">+</span> <span class="nc">{</span>
        <span class="nc">asdl_seq_LEN</span><span class="p">(</span><span class="nc">patterns</span><span class="p">)</span> <span class="o">==</span> <span class="nc">1</span> <span class="o">?</span> <span class="nc">asdl_seq_GET</span><span class="p">(</span><span class="nc">patterns,</span> <span class="nc">0</span><span class="p">)</span> <span class="o">:</span> <span class="nc">_PyAST_MatchOr</span><span class="p">(</span><span class="nc">patterns,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">closed_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">literal_pattern</span>
    <span class="o">|</span> <span class="nc">capture_pattern</span>
    <span class="o">|</span> <span class="nc">wildcard_pattern</span>
    <span class="o">|</span> <span class="nc">value_pattern</span>
    <span class="o">|</span> <span class="nc">group_pattern</span>
    <span class="o">|</span> <span class="nc">sequence_pattern</span>
    <span class="o">|</span> <span class="nc">mapping_pattern</span>
    <span class="o">|</span> <span class="nc">class_pattern</span>

<span class="c1"># Literal patterns are used for equality and identity constraints</span>
<span class="nc">literal_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">value</span><span class="o">=</span><span class="nc">signed_number</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;+&#39;</span> <span class="o">|</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchValue</span><span class="p">(</span><span class="nc">value,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">value</span><span class="o">=</span><span class="nc">complex_number</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchValue</span><span class="p">(</span><span class="nc">value,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">value</span><span class="o">=</span><span class="nc">strings</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchValue</span><span class="p">(</span><span class="nc">value,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;None&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchSingleton</span><span class="p">(</span><span class="nc">Py_None,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;True&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchSingleton</span><span class="p">(</span><span class="nc">Py_True,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;False&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchSingleton</span><span class="p">(</span><span class="nc">Py_False,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Literal expressions are used to restrict permitted mapping pattern keys</span>
<span class="nc">literal_expr</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">signed_number</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;+&#39;</span> <span class="o">|</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
    <span class="o">|</span> <span class="nc">complex_number</span>
    <span class="o">|</span> <span class="nc">strings</span>
    <span class="o">|</span> <span class="s1">&#39;None&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Constant</span><span class="p">(</span><span class="nc">Py_None,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;True&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Constant</span><span class="p">(</span><span class="nc">Py_True,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;False&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Constant</span><span class="p">(</span><span class="nc">Py_False,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">complex_number</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">real</span><span class="o">=</span><span class="nc">signed_real_number</span> <span class="s1">&#39;+&#39;</span> <span class="nc">imag</span><span class="o">=</span><span class="nc">imaginary_number</span> <span class="nc">{</span>
        <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">real,</span> <span class="nc">Add,</span> <span class="nc">imag,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">real</span><span class="o">=</span><span class="nc">signed_real_number</span> <span class="s1">&#39;-&#39;</span> <span class="nc">imag</span><span class="o">=</span><span class="nc">imaginary_number</span>  <span class="nc">{</span>
        <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">real,</span> <span class="nc">Sub,</span> <span class="nc">imag,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">signed_number</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">NUMBER</span>
    <span class="o">|</span> <span class="s1">&#39;-&#39;</span> <span class="nc">number</span><span class="o">=</span><span class="nc">NUMBER</span> <span class="nc">{</span> <span class="nc">_PyAST_UnaryOp</span><span class="p">(</span><span class="nc">USub,</span> <span class="nc">number,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">signed_real_number</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">real_number</span>
    <span class="o">|</span> <span class="s1">&#39;-&#39;</span> <span class="nc">real</span><span class="o">=</span><span class="nc">real_number</span> <span class="nc">{</span> <span class="nc">_PyAST_UnaryOp</span><span class="p">(</span><span class="nc">USub,</span> <span class="nc">real,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">real_number</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">real</span><span class="o">=</span><span class="nc">NUMBER</span> <span class="nc">{</span> <span class="nc">_PyPegen_ensure_real</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">real</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">imaginary_number</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">imag</span><span class="o">=</span><span class="nc">NUMBER</span> <span class="nc">{</span> <span class="nc">_PyPegen_ensure_imaginary</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">imag</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">capture_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">target</span><span class="o">=</span><span class="nc">pattern_capture_target</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchAs</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">target-&gt;v.Name.id,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">pattern_capture_target</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="o">!</span><span class="s2">&quot;_&quot;</span> <span class="nc">name</span><span class="o">=</span><span class="nc">NAME</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="o">|</span> <span class="s1">&#39;=&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">name,</span> <span class="nc">Store</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">wildcard_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s2">&quot;_&quot;</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchAs</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">value_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">attr</span><span class="o">=</span><span class="nc">attr</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="o">|</span> <span class="s1">&#39;=&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchValue</span><span class="p">(</span><span class="nc">attr,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">attr</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">value</span><span class="o">=</span><span class="nc">name_or_attr</span> <span class="s1">&#39;.&#39;</span> <span class="nc">attr</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Attribute</span><span class="p">(</span><span class="nc">value,</span> <span class="nc">attr-&gt;v.Name.id,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">name_or_attr</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">attr</span>
    <span class="o">|</span> <span class="nc">NAME</span>

<span class="nc">group_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">pattern</span><span class="o">=</span><span class="nc">pattern</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">pattern</span> <span class="nc">}</span>

<span class="nc">sequence_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;[&#39;</span> <span class="nc">patterns</span><span class="o">=</span><span class="nc">maybe_sequence_pattern</span><span class="o">?</span> <span class="s1">&#39;]&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchSequence</span><span class="p">(</span><span class="nc">patterns,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">patterns</span><span class="o">=</span><span class="nc">open_sequence_pattern</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchSequence</span><span class="p">(</span><span class="nc">patterns,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">open_sequence_pattern</span><span class="p">[</span><span class="s">asdl_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">pattern</span><span class="o">=</span><span class="nc">maybe_star_pattern</span> <span class="s1">&#39;,&#39;</span> <span class="nc">patterns</span><span class="o">=</span><span class="nc">maybe_sequence_pattern</span><span class="o">?</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">pattern,</span> <span class="nc">patterns</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">maybe_sequence_pattern</span><span class="p">[</span><span class="s">asdl_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">patterns</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">maybe_star_pattern</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="nc">{</span> <span class="nc">patterns</span> <span class="nc">}</span>

<span class="nc">maybe_star_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">star_pattern</span>
    <span class="o">|</span> <span class="nc">pattern</span>

<span class="nc">star_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">target</span><span class="o">=</span><span class="nc">pattern_capture_target</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchStar</span><span class="p">(</span><span class="nc">target-&gt;v.Name.id,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">wildcard_pattern</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchStar</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">mapping_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchMapping</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">rest</span><span class="o">=</span><span class="nc">double_star_pattern</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchMapping</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">rest-&gt;v.Name.id,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">items</span><span class="o">=</span><span class="nc">items_pattern</span> <span class="s1">&#39;,&#39;</span> <span class="nc">rest</span><span class="o">=</span><span class="nc">double_star_pattern</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchMapping</span><span class="p">(</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_pattern_keys</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">items</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_pattern_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_patterns</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">items</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">rest-&gt;v.Name.id,</span>
            <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">items</span><span class="o">=</span><span class="nc">items_pattern</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchMapping</span><span class="p">(</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_pattern_keys</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">items</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_pattern_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_patterns</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">items</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">NULL,</span>
            <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">items_pattern</span><span class="p">[</span><span class="s">asdl_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">key_value_pattern</span><span class="o">+</span>

<span class="nc">key_value_pattern</span><span class="p">[</span><span class="s">KeyPatternPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">key</span><span class="o">=</span><span class="p">(</span><span class="nc">literal_expr</span> <span class="o">|</span> <span class="nc">attr</span><span class="p">)</span> <span class="s1">&#39;:&#39;</span> <span class="nc">pattern</span><span class="o">=</span><span class="nc">pattern</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_key_pattern_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">key,</span> <span class="nc">pattern</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">double_star_pattern</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">target</span><span class="o">=</span><span class="nc">pattern_capture_target</span> <span class="nc">{</span> <span class="nc">target</span> <span class="nc">}</span>

<span class="nc">class_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">cls</span><span class="o">=</span><span class="nc">name_or_attr</span> <span class="s1">&#39;(&#39;</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchClass</span><span class="p">(</span><span class="nc">cls,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">cls</span><span class="o">=</span><span class="nc">name_or_attr</span> <span class="s1">&#39;(&#39;</span> <span class="nc">patterns</span><span class="o">=</span><span class="nc">positional_patterns</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchClass</span><span class="p">(</span><span class="nc">cls,</span> <span class="nc">patterns,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">cls</span><span class="o">=</span><span class="nc">name_or_attr</span> <span class="s1">&#39;(&#39;</span> <span class="nc">keywords</span><span class="o">=</span><span class="nc">keyword_patterns</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchClass</span><span class="p">(</span>
            <span class="nc">cls,</span> <span class="nc">NULL,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_identifier_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_map_names_to_ids</span><span class="p">(</span><span class="nc">p,</span>
                <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_pattern_keys</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">keywords</span><span class="p">))))</span><span class="nc">,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_pattern_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_patterns</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">keywords</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">cls</span><span class="o">=</span><span class="nc">name_or_attr</span> <span class="s1">&#39;(&#39;</span> <span class="nc">patterns</span><span class="o">=</span><span class="nc">positional_patterns</span> <span class="s1">&#39;,&#39;</span> <span class="nc">keywords</span><span class="o">=</span><span class="nc">keyword_patterns</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchClass</span><span class="p">(</span>
            <span class="nc">cls,</span>
            <span class="nc">patterns,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_identifier_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_map_names_to_ids</span><span class="p">(</span><span class="nc">p,</span>
                <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_pattern_keys</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">keywords</span><span class="p">))))</span><span class="nc">,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_pattern_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_patterns</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">keywords</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_class_pattern</span>

<span class="nc">positional_patterns</span><span class="p">[</span><span class="s">asdl_pattern_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">args</span><span class="p">[</span><span class="s">asdl_pattern_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">pattern</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">args</span> <span class="nc">}</span>

<span class="nc">keyword_patterns</span><span class="p">[</span><span class="s">asdl_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">keyword_pattern</span><span class="o">+</span>

<span class="nc">keyword_pattern</span><span class="p">[</span><span class="s">KeyPatternPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">arg</span><span class="o">=</span><span class="nc">NAME</span> <span class="s1">&#39;=&#39;</span> <span class="nc">value</span><span class="o">=</span><span class="nc">pattern</span> <span class="nc">{</span> <span class="nc">_PyPegen_key_pattern_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">arg,</span> <span class="nc">value</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Type statement</span>
<span class="c1"># ---------------</span>

<span class="nc">type_alias</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s2">&quot;type&quot;</span> <span class="nc">n</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">t</span><span class="o">=</span><span class="p">[</span><span class="s">type_params</span><span class="p">]</span> <span class="s1">&#39;=&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">stmt_ty,</span> <span class="nc">12,</span> <span class="s2">&quot;Type statement is&quot;</span><span class="nc">,</span>
        <span class="nc">_PyAST_TypeAlias</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">expr_ty,</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">n,</span> <span class="nc">Store</span><span class="p">))</span><span class="nc">,</span> <span class="nc">t,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>

<span class="c1"># Type parameter declaration</span>
<span class="c1"># --------------------------</span>

<span class="nc">type_params</span><span class="p">[</span><span class="s">asdl_type_param_seq*</span><span class="p">]</span><span class="o">:</span> 
    <span class="o">|</span> <span class="nc">invalid_type_params</span>
    <span class="o">|</span> <span class="s1">&#39;[&#39;</span> <span class="nc">t</span><span class="o">=</span><span class="nc">type_param_seq</span> <span class="s1">&#39;]&#39;</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">asdl_type_param_seq</span> <span class="o">*</span><span class="nc">,</span> <span class="nc">12,</span> <span class="s2">&quot;Type parameter lists are&quot;</span><span class="nc">,</span> <span class="nc">t</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">type_param_seq</span><span class="p">[</span><span class="s">asdl_type_param_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_type_param_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">type_param</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">type_param</span><span class="p">[</span><span class="s">type_param_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">type_param_bound</span><span class="p">]</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">type_param_default</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_TypeVar</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">colon</span><span class="o">=</span><span class="s1">&#39;:&#39;</span> <span class="nc">e</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
            <span class="nc">RAISE_SYNTAX_ERROR_STARTING_FROM</span><span class="p">(</span><span class="nc">colon,</span> <span class="nc">e-&gt;kind</span> <span class="o">==</span> <span class="nc">Tuple_kind</span>
                <span class="o">?</span> <span class="s2">&quot;cannot use constraints with TypeVarTuple&quot;</span>
                <span class="o">:</span> <span class="s2">&quot;cannot use bound with TypeVarTuple&quot;</span><span class="p">)</span>
        <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">type_param_starred_default</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_TypeVarTuple</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">colon</span><span class="o">=</span><span class="s1">&#39;:&#39;</span> <span class="nc">e</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
            <span class="nc">RAISE_SYNTAX_ERROR_STARTING_FROM</span><span class="p">(</span><span class="nc">colon,</span> <span class="nc">e-&gt;kind</span> <span class="o">==</span> <span class="nc">Tuple_kind</span>
                <span class="o">?</span> <span class="s2">&quot;cannot use constraints with ParamSpec&quot;</span>
                <span class="o">:</span> <span class="s2">&quot;cannot use bound with ParamSpec&quot;</span><span class="p">)</span>
        <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">type_param_default</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_ParamSpec</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">type_param_bound</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;:&#39;</span> <span class="nc">e</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">e</span> <span class="nc">}</span>
<span class="nc">type_param_default</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;=&#39;</span> <span class="nc">e</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
    <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">expr_ty,</span> <span class="nc">13,</span> <span class="s2">&quot;Type parameter defaults are&quot;</span><span class="nc">,</span> <span class="nc">e</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">type_param_starred_default</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;=&#39;</span> <span class="nc">e</span><span class="o">=</span><span class="nc">star_expression</span> <span class="nc">{</span>
    <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">expr_ty,</span> <span class="nc">13,</span> <span class="s2">&quot;Type parameter defaults are&quot;</span><span class="nc">,</span> <span class="nc">e</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># EXPRESSIONS</span>
<span class="c1"># -----------</span>

<span class="nc">expressions</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">b</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">c</span> <span class="nc">}</span><span class="p">)</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">expression</span>

<span class="nc">expression</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_expression</span>
    <span class="o">|</span> <span class="nc">invalid_legacy_expression</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">disjunction</span> <span class="s1">&#39;if&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">disjunction</span> <span class="s1">&#39;else&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyAST_IfExp</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">disjunction</span>
    <span class="o">|</span> <span class="nc">lambdef</span>

<span class="nc">yield_expr</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;yield&#39;</span> <span class="s1">&#39;from&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyAST_YieldFrom</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;yield&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">star_expressions</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_Yield</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">star_expressions</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_expression</span> <span class="nc">b</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">star_expression</span> <span class="nc">{</span> <span class="nc">c</span> <span class="nc">}</span><span class="p">)</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_expression</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">star_expression</span>

<span class="nc">star_expression</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyAST_Starred</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">expression</span>

<span class="nc">star_named_expressions</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">star_named_expression</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">star_named_expression</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyAST_Starred</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">named_expression</span>

<span class="nc">assignment_expression</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="s1">&#39;:=&#39;</span> <span class="o">~</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">expr_ty,</span> <span class="nc">8,</span> <span class="s2">&quot;Assignment expressions are&quot;</span><span class="nc">,</span>
        <span class="nc">_PyAST_NamedExpr</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">expr_ty,</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Store</span><span class="p">))</span><span class="nc">,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>

<span class="nc">named_expression</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">assignment_expression</span>
    <span class="o">|</span> <span class="nc">invalid_named_expression</span>
    <span class="o">|</span> <span class="nc">expression</span> <span class="o">!</span><span class="s1">&#39;:=&#39;</span>

<span class="nc">disjunction</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">conjunction</span> <span class="nc">b</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;or&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">conjunction</span> <span class="nc">{</span> <span class="nc">c</span> <span class="nc">}</span><span class="p">)</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">_PyAST_BoolOp</span><span class="p">(</span>
        <span class="nc">Or,</span>
        <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span>
        <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">conjunction</span>

<span class="nc">conjunction</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">inversion</span> <span class="nc">b</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;and&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">inversion</span> <span class="nc">{</span> <span class="nc">c</span> <span class="nc">}</span><span class="p">)</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">_PyAST_BoolOp</span><span class="p">(</span>
        <span class="nc">And,</span>
        <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span>
        <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">inversion</span>

<span class="nc">inversion</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;not&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">inversion</span> <span class="nc">{</span> <span class="nc">_PyAST_UnaryOp</span><span class="p">(</span><span class="nc">Not,</span> <span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">comparison</span>

<span class="c1"># Comparison operators</span>
<span class="c1"># --------------------</span>

<span class="nc">comparison</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">b</span><span class="o">=</span><span class="nc">compare_op_bitwise_or_pair</span><span class="o">+</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Compare</span><span class="p">(</span>
            <span class="nc">a,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_int_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_cmpops</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_exprs</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">bitwise_or</span>

<span class="nc">compare_op_bitwise_or_pair</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">eq_bitwise_or</span>
    <span class="o">|</span> <span class="nc">noteq_bitwise_or</span>
    <span class="o">|</span> <span class="nc">lte_bitwise_or</span>
    <span class="o">|</span> <span class="nc">lt_bitwise_or</span>
    <span class="o">|</span> <span class="nc">gte_bitwise_or</span>
    <span class="o">|</span> <span class="nc">gt_bitwise_or</span>
    <span class="o">|</span> <span class="nc">notin_bitwise_or</span>
    <span class="o">|</span> <span class="nc">in_bitwise_or</span>
    <span class="o">|</span> <span class="nc">isnot_bitwise_or</span>
    <span class="o">|</span> <span class="nc">is_bitwise_or</span>

<span class="nc">eq_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;==&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Eq,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">noteq_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">(</span><span class="nc">tok</span><span class="o">=</span><span class="s1">&#39;!=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_check_barry_as_flufl</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tok</span><span class="p">)</span> <span class="o">?</span> <span class="nc">NULL</span> <span class="o">:</span> <span class="nc">tok}</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NotEq,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">lte_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;&lt;=&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">LtE,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">lt_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;&lt;&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Lt,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">gte_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;&gt;=&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">GtE,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">gt_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;&gt;&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Gt,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">notin_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;not&#39;</span> <span class="s1">&#39;in&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NotIn,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">in_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;in&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">In,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">isnot_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;is&#39;</span> <span class="s1">&#39;not&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">IsNot,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">is_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;is&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Is,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Bitwise operators</span>
<span class="c1"># -----------------</span>

<span class="nc">bitwise_or</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="s1">&#39;|&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">bitwise_xor</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">BitOr,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">bitwise_xor</span>

<span class="nc">bitwise_xor</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_xor</span> <span class="s1">&#39;^&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">bitwise_and</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">BitXor,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">bitwise_and</span>

<span class="nc">bitwise_and</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_and</span> <span class="s1">&#39;&amp;&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">shift_expr</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">BitAnd,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">shift_expr</span>

<span class="nc">shift_expr</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">shift_expr</span> <span class="s1">&#39;&lt;&lt;&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">sum</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">LShift,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">shift_expr</span> <span class="s1">&#39;&gt;&gt;&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">sum</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">RShift,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_arithmetic</span>
    <span class="o">|</span> <span class="nc">sum</span>

<span class="c1"># Arithmetic operators</span>
<span class="c1"># --------------------</span>

<span class="nc">sum</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">sum</span> <span class="s1">&#39;+&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">term</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Add,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">sum</span> <span class="s1">&#39;-&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">term</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Sub,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">term</span>

<span class="nc">term</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">term</span> <span class="s1">&#39;*&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Mult,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">term</span> <span class="s1">&#39;/&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Div,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">term</span> <span class="s1">&#39;//&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">FloorDiv,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">term</span> <span class="s1">&#39;%&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Mod,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">term</span> <span class="s1">&#39;@&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">expr_ty,</span> <span class="nc">5,</span> <span class="s2">&quot;The &#39;@&#39; operator is&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">MatMult,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_factor</span>
    <span class="o">|</span> <span class="nc">factor</span>

<span class="nc">factor</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;+&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_UnaryOp</span><span class="p">(</span><span class="nc">UAdd,</span> <span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;-&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_UnaryOp</span><span class="p">(</span><span class="nc">USub,</span> <span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;~&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_UnaryOp</span><span class="p">(</span><span class="nc">Invert,</span> <span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">power</span>

<span class="nc">power</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">await_primary</span> <span class="s1">&#39;**&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Pow,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">await_primary</span>

<span class="c1"># Primary elements</span>
<span class="c1"># ----------------</span>

<span class="c1"># Primary elements are things like &quot;obj.something.something&quot;, &quot;obj[something]&quot;, &quot;obj(something)&quot;, &quot;obj&quot; ...</span>

<span class="nc">await_primary</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;await&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">primary</span> <span class="nc">{</span> <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">expr_ty,</span> <span class="nc">5,</span> <span class="s2">&quot;Await expressions are&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_Await</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">primary</span>

<span class="nc">primary</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">primary</span> <span class="s1">&#39;.&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span> <span class="nc">_PyAST_Attribute</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b-&gt;v.Name.id,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">primary</span> <span class="nc">b</span><span class="o">=</span><span class="nc">genexp</span> <span class="nc">{</span> <span class="nc">_PyAST_Call</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">primary</span> <span class="s1">&#39;(&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">arguments</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Call</span><span class="p">(</span><span class="nc">a,</span>
                 <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Call.args</span> <span class="o">:</span> <span class="nc">NULL,</span>
                 <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Call.keywords</span> <span class="o">:</span> <span class="nc">NULL,</span>
                 <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">primary</span> <span class="s1">&#39;[&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">slices</span> <span class="s1">&#39;]&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Subscript</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">atom</span>

<span class="nc">slices</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">slice</span> <span class="o">!</span><span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="p">(</span><span class="nc">slice</span> <span class="o">|</span> <span class="nc">starred_expression</span><span class="p">)</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">slice</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">expression</span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">expression</span><span class="p">]</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;:&#39; d=[expression</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">d</span> <span class="nc">}</span>] <span class="nc">{</span> <span class="nc">_PyAST_Slice</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">atom</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">NAME</span>
    <span class="o">|</span> <span class="s1">&#39;True&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Constant</span><span class="p">(</span><span class="nc">Py_True,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;False&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Constant</span><span class="p">(</span><span class="nc">Py_False,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;None&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Constant</span><span class="p">(</span><span class="nc">Py_None,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="p">(</span><span class="nc">STRING</span><span class="o">|</span><span class="nc">FSTRING_START</span><span class="p">)</span> <span class="nc">strings</span>
    <span class="o">|</span> <span class="nc">NUMBER</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;(&#39;</span> <span class="p">(</span><span class="nc">tuple</span> <span class="o">|</span> <span class="nc">group</span> <span class="o">|</span> <span class="nc">genexp</span><span class="p">)</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;[&#39;</span> <span class="p">(</span><span class="nc">list</span> <span class="o">|</span> <span class="nc">listcomp</span><span class="p">)</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;{&#39;</span> <span class="p">(</span><span class="nc">dict</span> <span class="o">|</span> <span class="nc">set</span> <span class="o">|</span> <span class="nc">dictcomp</span> <span class="o">|</span> <span class="nc">setcomp</span><span class="p">)</span>
    <span class="o">|</span> <span class="s1">&#39;...&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Constant</span><span class="p">(</span><span class="nc">Py_Ellipsis,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">group</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">(</span><span class="nc">yield_expr</span> <span class="o">|</span> <span class="nc">named_expression</span><span class="p">)</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_group</span>

<span class="c1"># Lambda functions</span>
<span class="c1"># ----------------</span>

<span class="nc">lambdef</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;lambda&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">lambda_params</span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Lambda</span><span class="p">((</span><span class="nc">a</span><span class="p">)</span> <span class="o">?</span> <span class="nc">a</span> <span class="o">:</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">arguments_ty,</span> <span class="nc">_PyPegen_empty_arguments</span><span class="p">(</span><span class="nc">p</span><span class="p">))</span><span class="nc">,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">lambda_params</span><span class="p">[</span><span class="s">arguments_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_lambda_parameters</span>
    <span class="o">|</span> <span class="nc">lambda_parameters</span>

<span class="c1"># lambda_parameters etc. duplicates parameters but without annotations</span>
<span class="c1"># or type comments, and if there&#39;s no comma after a parameter, we expect</span>
<span class="c1"># a colon, not a close parenthesis.  (For more, see parameters above.)</span>
<span class="c1">#</span>
<span class="nc">lambda_parameters</span><span class="p">[</span><span class="s">arguments_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_slash_no_default</span> <span class="nc">b</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">lambda_param_no_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="nc">lambda_param_with_default</span><span class="o">*</span> <span class="nc">d</span><span class="o">=</span><span class="p">[</span><span class="s">lambda_star_etc</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">arguments_ty,</span> <span class="nc">8,</span> <span class="s2">&quot;Positional-only parameters are&quot;</span><span class="nc">,</span> <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">d</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_slash_with_default</span> <span class="nc">b</span><span class="o">=</span><span class="nc">lambda_param_with_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">lambda_star_etc</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">arguments_ty,</span> <span class="nc">8,</span> <span class="s2">&quot;Positional-only parameters are&quot;</span><span class="nc">,</span> <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">lambda_param_no_default</span><span class="o">+</span> <span class="nc">b</span><span class="o">=</span><span class="nc">lambda_param_with_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">lambda_star_etc</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param_with_default</span><span class="o">+</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">lambda_star_etc</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span><span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_star_etc</span> <span class="nc">{</span> <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">lambda_slash_no_default</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">lambda_param_no_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">lambda_param_no_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">lambda_slash_with_default</span><span class="p">[</span><span class="s">SlashWithDefault*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param_no_default</span><span class="o">*</span> <span class="nc">b</span><span class="o">=</span><span class="nc">lambda_param_with_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_slash_with_default</span><span class="p">(</span><span class="nc">p,</span> <span class="p">(</span><span class="nc">asdl_arg_seq</span> <span class="o">*</span><span class="p">)</span><span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param_no_default</span><span class="o">*</span> <span class="nc">b</span><span class="o">=</span><span class="nc">lambda_param_with_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_slash_with_default</span><span class="p">(</span><span class="nc">p,</span> <span class="p">(</span><span class="nc">asdl_arg_seq</span> <span class="o">*</span><span class="p">)</span><span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">lambda_star_etc</span><span class="p">[</span><span class="s">StarEtc*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_lambda_star_etc</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param_no_default</span> <span class="nc">b</span><span class="o">=</span><span class="nc">lambda_param_maybe_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">lambda_kwds</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_star_etc</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">lambda_param_maybe_default</span><span class="o">+</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">lambda_kwds</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_star_etc</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_kwds</span> <span class="nc">{</span> <span class="nc">_PyPegen_star_etc</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">lambda_kwds</span><span class="p">[</span><span class="s">arg_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_lambda_kwds</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param_no_default</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">lambda_param_no_default</span><span class="p">[</span><span class="s">arg_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param</span> <span class="o">&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">lambda_param_with_default</span><span class="p">[</span><span class="s">NameDefaultPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">NULL</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span> <span class="o">&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">NULL</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">lambda_param_maybe_default</span><span class="p">[</span><span class="s">NameDefaultPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span><span class="o">?</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">NULL</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span><span class="o">?</span> <span class="o">&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">NULL</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">lambda_param</span><span class="p">[</span><span class="s">arg_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span> <span class="nc">_PyAST_arg</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># LITERALS</span>
<span class="c1"># ========</span>

<span class="nc">fstring_middle</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">fstring_replacement_field</span>
    <span class="o">|</span> <span class="nc">t</span><span class="o">=</span><span class="nc">FSTRING_MIDDLE</span> <span class="nc">{</span> <span class="nc">_PyPegen_constant_from_token</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">t</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">fstring_replacement_field</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">annotated_rhs</span> <span class="nc">debug_expr</span><span class="o">=</span><span class="s1">&#39;=&#39;</span><span class="o">?</span> <span class="nc">conversion</span><span class="o">=</span><span class="p">[</span><span class="s">fstring_conversion</span><span class="p">]</span> <span class="nc">format</span><span class="o">=</span><span class="p">[</span><span class="s">fstring_full_format_spec</span><span class="p">]</span> <span class="nc">rbrace</span><span class="o">=</span><span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_formatted_value</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">debug_expr,</span> <span class="nc">conversion,</span> <span class="nc">format,</span> <span class="nc">rbrace,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_replacement_field</span>
<span class="nc">fstring_conversion</span><span class="p">[</span><span class="s">ResultTokenWithMetadata*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">conv_token</span><span class="o">=</span><span class="s2">&quot;!&quot;</span> <span class="nc">conv</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span> <span class="nc">_PyPegen_check_fstring_conversion</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">conv_token,</span> <span class="nc">conv</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">fstring_full_format_spec</span><span class="p">[</span><span class="s">ResultTokenWithMetadata*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">colon</span><span class="o">=</span><span class="s1">&#39;:&#39;</span> <span class="nc">spec</span><span class="o">=</span><span class="nc">fstring_format_spec</span><span class="o">*</span> <span class="nc">{</span> <span class="nc">_PyPegen_setup_full_format_spec</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">colon,</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span> <span class="o">*</span><span class="p">)</span> <span class="nc">spec,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">fstring_format_spec</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">t</span><span class="o">=</span><span class="nc">FSTRING_MIDDLE</span> <span class="nc">{</span> <span class="nc">_PyPegen_decoded_constant_from_token</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">t</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">fstring_replacement_field</span>
<span class="nc">fstring</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">FSTRING_START</span> <span class="nc">b</span><span class="o">=</span><span class="nc">fstring_middle</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="nc">FSTRING_END</span> <span class="nc">{</span> <span class="nc">_PyPegen_joined_str</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">string</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">s</span><span class="p">[</span><span class="s">Token*</span><span class="p">]</span><span class="o">=</span><span class="nc">STRING</span> <span class="nc">{</span> <span class="nc">_PyPegen_constant_from_string</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">s</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">strings</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="nc">fstring</span><span class="o">|</span><span class="nc">string</span><span class="p">)</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">_PyPegen_concatenate_strings</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">list</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;[&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">star_named_expressions</span><span class="p">]</span> <span class="s1">&#39;]&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_List</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">tuple</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">y=star_named_expression &#39;,&#39; z=[star_named_expressions</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">y,</span> <span class="nc">z</span><span class="p">)</span> <span class="nc">}</span> ] <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">set</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_named_expressions</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Set</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Dicts</span>
<span class="c1"># -----</span>

<span class="nc">dict</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">double_starred_kvpairs</span><span class="p">]</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Dict</span><span class="p">(</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_keys</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_values</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">invalid_double_starred_kvpairs</span> <span class="s1">&#39;}&#39;</span>

<span class="nc">double_starred_kvpairs</span><span class="p">[</span><span class="s">asdl_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">double_starred_kvpair</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">double_starred_kvpair</span><span class="p">[</span><span class="s">KeyValuePair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_key_value_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">kvpair</span>

<span class="nc">kvpair</span><span class="p">[</span><span class="s">KeyValuePair*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyPegen_key_value_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Comprehensions &amp; Generators</span>
<span class="c1"># ---------------------------</span>

<span class="nc">for_if_clauses</span><span class="p">[</span><span class="s">asdl_comprehension_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_comprehension_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">for_if_clause</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">for_if_clause</span><span class="p">[</span><span class="s">comprehension_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;async&#39;</span> <span class="s1">&#39;for&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_targets</span> <span class="s1">&#39;in&#39;</span> <span class="o">~</span> <span class="nc">b</span><span class="o">=</span><span class="nc">disjunction</span> <span class="nc">c</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;if&#39;</span> <span class="nc">z</span><span class="o">=</span><span class="nc">disjunction</span> <span class="nc">{</span> <span class="nc">z</span> <span class="nc">}</span><span class="p">)</span><span class="o">*</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">comprehension_ty,</span> <span class="nc">6,</span> <span class="s2">&quot;Async comprehensions are&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_comprehension</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">1,</span> <span class="nc">p-&gt;arena</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;for&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_targets</span> <span class="s1">&#39;in&#39;</span> <span class="o">~</span> <span class="nc">b</span><span class="o">=</span><span class="nc">disjunction</span> <span class="nc">c</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;if&#39;</span> <span class="nc">z</span><span class="o">=</span><span class="nc">disjunction</span> <span class="nc">{</span> <span class="nc">z</span> <span class="nc">}</span><span class="p">)</span><span class="o">*</span> <span class="nc">{</span>
        <span class="nc">_PyAST_comprehension</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">0,</span> <span class="nc">p-&gt;arena</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;async&#39;</span><span class="o">?</span> <span class="s1">&#39;for&#39;</span> <span class="p">(</span><span class="nc">bitwise_or</span> <span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="nc">bitwise_or</span><span class="p">)</span><span class="o">*</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">])</span> <span class="o">!</span><span class="s1">&#39;in&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;&#39;in&#39; expected after for-loop variables&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_for_target</span>

<span class="nc">listcomp</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;[&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="nc">b</span><span class="o">=</span><span class="nc">for_if_clauses</span> <span class="s1">&#39;]&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_ListComp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_comprehension</span>

<span class="nc">setcomp</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="nc">b</span><span class="o">=</span><span class="nc">for_if_clauses</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_SetComp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_comprehension</span>

<span class="nc">genexp</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">(</span> <span class="nc">assignment_expression</span> <span class="o">|</span> <span class="nc">expression</span> <span class="o">!</span><span class="s1">&#39;:=&#39;</span><span class="p">)</span> <span class="nc">b</span><span class="o">=</span><span class="nc">for_if_clauses</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_GeneratorExp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_comprehension</span>

<span class="nc">dictcomp</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">kvpair</span> <span class="nc">b</span><span class="o">=</span><span class="nc">for_if_clauses</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_DictComp</span><span class="p">(</span><span class="nc">a-&gt;key,</span> <span class="nc">a-&gt;value,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_dict_comprehension</span>

<span class="c1"># FUNCTION CALL ARGUMENTS</span>
<span class="c1"># =======================</span>

<span class="nc">arguments</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">args</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="o">&amp;</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_arguments</span>

<span class="nc">args</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="p">(</span><span class="nc">starred_expression</span> <span class="o">|</span> <span class="p">(</span> <span class="nc">assignment_expression</span> <span class="o">|</span> <span class="nc">expression</span> <span class="o">!</span><span class="s1">&#39;:=&#39;</span><span class="p">)</span> <span class="o">!</span><span class="s1">&#39;=&#39;</span><span class="p">)</span><span class="o">+</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;,&#39; k=kwargs {k}</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_collect_call_seqs</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">kwargs</span> <span class="nc">{</span> <span class="nc">_PyAST_Call</span><span class="p">(</span><span class="nc">_PyPegen_dummy_name</span><span class="p">(</span><span class="nc">p</span><span class="p">)</span><span class="nc">,</span>
                          <span class="nc">CHECK_NULL_ALLOWED</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_extract_starred_exprs</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span>
                          <span class="nc">CHECK_NULL_ALLOWED</span><span class="p">(</span><span class="nc">asdl_keyword_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_delete_starred_exprs</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span>
                          <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">kwargs</span><span class="p">[</span><span class="s">asdl_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">kwarg_or_starred</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">kwarg_or_double_starred</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">_PyPegen_join_sequences</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">kwarg_or_starred</span><span class="o">+</span>
    <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">kwarg_or_double_starred</span><span class="o">+</span>

<span class="nc">starred_expression</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_starred_expression</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyAST_Starred</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;Invalid star expression&quot;</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">kwarg_or_starred</span><span class="p">[</span><span class="s">KeywordOrStarred*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_kwarg</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="s1">&#39;=&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_keyword_or_starred</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">keyword_ty,</span> <span class="nc">_PyAST_keyword</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">))</span><span class="nc">,</span> <span class="nc">1</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">starred_expression</span> <span class="nc">{</span> <span class="nc">_PyPegen_keyword_or_starred</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">0</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">kwarg_or_double_starred</span><span class="p">[</span><span class="s">KeywordOrStarred*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_kwarg</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="s1">&#39;=&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_keyword_or_starred</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">keyword_ty,</span> <span class="nc">_PyAST_keyword</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">))</span><span class="nc">,</span> <span class="nc">1</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyPegen_keyword_or_starred</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">keyword_ty,</span> <span class="nc">_PyAST_keyword</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">))</span><span class="nc">,</span> <span class="nc">1</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># ASSIGNMENT TARGETS</span>
<span class="c1"># ==================</span>

<span class="c1"># Generic targets</span>
<span class="c1"># ---------------</span>

<span class="c1"># NOTE: star_targets may contain *bitwise_or, targets may not.</span>
<span class="nc">star_targets</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_target</span> <span class="o">!</span><span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_target</span> <span class="nc">b</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">star_target</span> <span class="nc">{</span> <span class="nc">c</span> <span class="nc">}</span><span class="p">)</span><span class="o">*</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">star_targets_list_seq</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">star_target</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">star_targets_tuple_seq</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_target</span> <span class="nc">b</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">star_target</span> <span class="nc">{</span> <span class="nc">c</span> <span class="nc">}</span><span class="p">)</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_target</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">star_target</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">(</span><span class="o">!</span><span class="s1">&#39;*&#39;</span> <span class="nc">star_target</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Starred</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">expr_ty,</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Store</span><span class="p">))</span><span class="nc">,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">target_with_star_atom</span>

<span class="nc">target_with_star_atom</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;.&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">NAME</span> <span class="o">!</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Attribute</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b-&gt;v.Name.id,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;[&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">slices</span> <span class="s1">&#39;]&#39;</span> <span class="o">!</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Subscript</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">star_atom</span>

<span class="nc">star_atom</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Store</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">target_with_star_atom</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Store</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">star_targets_tuple_seq</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;[&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">star_targets_list_seq</span><span class="p">]</span> <span class="s1">&#39;]&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_List</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">single_target</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">single_subscript_attribute_target</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Store</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">single_target</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">single_subscript_attribute_target</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;.&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">NAME</span> <span class="o">!</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Attribute</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b-&gt;v.Name.id,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;[&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">slices</span> <span class="s1">&#39;]&#39;</span> <span class="o">!</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Subscript</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">t_primary</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;.&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">NAME</span> <span class="o">&amp;</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Attribute</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b-&gt;v.Name.id,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;[&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">slices</span> <span class="s1">&#39;]&#39;</span> <span class="o">&amp;</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Subscript</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="nc">b</span><span class="o">=</span><span class="nc">genexp</span> <span class="o">&amp;</span><span class="nc">t_lookahead</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Call</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;(&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">arguments</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="o">&amp;</span><span class="nc">t_lookahead</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Call</span><span class="p">(</span><span class="nc">a,</span>
                 <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Call.args</span> <span class="o">:</span> <span class="nc">NULL,</span>
                 <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Call.keywords</span> <span class="o">:</span> <span class="nc">NULL,</span>
                 <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">atom</span> <span class="o">&amp;</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">t_lookahead</span><span class="o">:</span> <span class="s1">&#39;(&#39;</span> <span class="o">|</span> <span class="s1">&#39;[&#39;</span> <span class="o">|</span> <span class="s1">&#39;.&#39;</span>

<span class="c1"># Targets for del statements</span>
<span class="c1"># --------------------------</span>

<span class="nc">del_targets</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">del_target</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">del_target</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;.&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">NAME</span> <span class="o">!</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Attribute</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b-&gt;v.Name.id,</span> <span class="nc">Del,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;[&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">slices</span> <span class="s1">&#39;]&#39;</span> <span class="o">!</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Subscript</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">Del,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">del_t_atom</span>

<span class="nc">del_t_atom</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Del</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">del_target</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Del</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">del_targets</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Del,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;[&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">del_targets</span><span class="p">]</span> <span class="s1">&#39;]&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_List</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Del,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># TYPING ELEMENTS</span>
<span class="c1"># ---------------</span>

<span class="c1"># type_expressions allow */** but ignore them</span>
<span class="nc">type_expressions</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">expression</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="s1">&#39;*&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;,&#39;</span> <span class="s1">&#39;**&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
        <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_seq_append_to_end</span><span class="p">(</span>
            <span class="nc">p,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_append_to_end</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">expression</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="s1">&#39;*&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_seq_append_to_end</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">expression</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="s1">&#39;**&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_seq_append_to_end</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;,&#39;</span> <span class="s1">&#39;**&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
        <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_seq_append_to_end</span><span class="p">(</span>
            <span class="nc">p,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">expression</span><span class="o">+</span> <span class="nc">{a}</span>

<span class="nc">func_type_comment</span><span class="p">[</span><span class="s">Token*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">NEWLINE</span> <span class="nc">t</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span> <span class="o">&amp;</span><span class="p">(</span><span class="nc">NEWLINE</span> <span class="nc">INDENT</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">t</span> <span class="nc">}</span>  <span class="c1"># Must be followed by indented block</span>
    <span class="o">|</span> <span class="nc">invalid_double_type_comments</span>
    <span class="o">|</span> <span class="nc">TYPE_COMMENT</span>

<span class="c1"># ========================= END OF THE GRAMMAR ===========================</span>



<span class="c1"># ========================= START OF INVALID RULES =======================</span>

<span class="c1"># From here on, there are rules for invalid syntax with specialised error messages</span>
<span class="nc">invalid_arguments</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">((</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="p">(</span><span class="nc">starred_expression</span> <span class="o">|</span> <span class="p">(</span> <span class="nc">assignment_expression</span> <span class="o">|</span> <span class="nc">expression</span> <span class="o">!</span><span class="s1">&#39;:=&#39;</span><span class="p">)</span> <span class="o">!</span><span class="s1">&#39;=&#39;</span><span class="p">)</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="nc">kwargs</span><span class="p">)</span> <span class="o">|</span> <span class="nc">kwargs</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;,&#39;</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="p">(</span><span class="nc">starred_expression</span> <span class="o">!</span><span class="s1">&#39;=&#39;</span><span class="p">)</span><span class="o">+</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_STARTING_FROM</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;iterable argument unpacking follows keyword argument unpacking&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">b</span><span class="o">=</span><span class="nc">for_if_clauses</span> <span class="s1">&#39;,&#39;</span> <span class="p">[</span><span class="s">args | expression for_if_clauses</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">_PyPegen_get_last_comprehension_item</span><span class="p">(</span><span class="nc">PyPegen_last_item</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">comprehension_ty</span><span class="p">))</span><span class="nc">,</span> <span class="s2">&quot;Generator expression must be parenthesized&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nc">expression</span> <span class="nc">for_if_clauses</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;invalid syntax. Maybe you meant &#39;==&#39; or &#39;:=&#39; instead of &#39;=&#39;?&quot;</span><span class="p">)</span><span class="nc">}</span>
    <span class="o">|</span> <span class="p">(</span><span class="nc">args</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span><span class="o">?</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="o">|</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;expected argument value expression&quot;</span><span class="p">)</span><span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">args</span> <span class="nc">b</span><span class="o">=</span><span class="nc">for_if_clauses</span> <span class="nc">{</span> <span class="nc">_PyPegen_nonparen_genexp_in_call</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">args</span> <span class="s1">&#39;,&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">b</span><span class="o">=</span><span class="nc">for_if_clauses</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">_PyPegen_get_last_comprehension_item</span><span class="p">(</span><span class="nc">PyPegen_last_item</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">comprehension_ty</span><span class="p">))</span><span class="nc">,</span> <span class="s2">&quot;Generator expression must be parenthesized&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">args</span> <span class="s1">&#39;,&#39;</span> <span class="nc">args</span> <span class="nc">{</span> <span class="nc">_PyPegen_arguments_parsing_error</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_kwarg</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">Token*</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;True&#39;</span><span class="o">|</span><span class="s1">&#39;False&#39;</span><span class="o">|</span><span class="s1">&#39;None&#39;</span><span class="p">)</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;cannot assign to %s&quot;</span><span class="nc">,</span> <span class="nc">PyBytes_AS_STRING</span><span class="p">(</span><span class="nc">a-&gt;bytes</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nc">expression</span> <span class="nc">for_if_clauses</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;invalid syntax. Maybe you meant &#39;==&#39; or &#39;:=&#39; instead of &#39;=&#39;?&quot;</span><span class="p">)</span><span class="nc">}</span>
    <span class="o">|</span> <span class="o">!</span><span class="p">(</span><span class="nc">NAME</span> <span class="s1">&#39;=&#39;</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span>
            <span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;expression cannot contain assignment, perhaps you meant \&quot;==\&quot;?&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;**&#39;</span> <span class="nc">expression</span> <span class="s1">&#39;=&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;cannot assign to keyword argument unpacking&quot;</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># IMPORTANT: Note that the &quot;_without_invalid&quot; suffix causes the rule to not call invalid rules under it</span>
<span class="nc">expression_without_invalid</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">disjunction</span> <span class="s1">&#39;if&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">disjunction</span> <span class="s1">&#39;else&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyAST_IfExp</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">disjunction</span>
    <span class="o">|</span> <span class="nc">lambdef</span>
<span class="nc">invalid_legacy_expression</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="o">!</span><span class="s1">&#39;(&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_check_legacy_stmt</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="o">?</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span>
            <span class="s2">&quot;Missing parentheses in call to &#39;%U&#39;. Did you mean %U(...)?&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;v.Name.id,</span> <span class="nc">a-&gt;v.Name.id</span><span class="p">)</span> <span class="o">:</span> <span class="nc">NULL}</span>

<span class="nc">invalid_expression</span><span class="o">:</span>
    <span class="c1"># !(NAME STRING) is not matched so we don&#39;t show this error with some invalid string prefixes like: kf&quot;dsfsdf&quot;</span>
    <span class="c1"># Soft keywords need to also be ignored because they can be parsed as NAME NAME</span>
   <span class="o">|</span> <span class="o">!</span><span class="p">(</span><span class="nc">NAME</span> <span class="nc">STRING</span> <span class="o">|</span> <span class="nc">SOFT_KEYWORD</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="nc">disjunction</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression_without_invalid</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_check_legacy_stmt</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="o">?</span> <span class="nc">NULL</span> <span class="o">:</span> <span class="nc">p-&gt;tokens</span><span class="p">[</span><span class="s">p-&gt;mark-1</span><span class="p">]</span><span class="nc">-&gt;level</span> <span class="o">==</span> <span class="nc">0</span> <span class="o">?</span> <span class="nc">NULL</span> <span class="o">:</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;invalid syntax. Perhaps you forgot a comma?&quot;</span><span class="p">)</span> <span class="nc">}</span>
   <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">disjunction</span> <span class="s1">&#39;if&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">disjunction</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;else&#39;</span><span class="o">|</span><span class="s1">&#39;:&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;expected &#39;else&#39; after &#39;if&#39; expression&quot;</span><span class="p">)</span> <span class="nc">}</span>
   <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;lambda&#39;</span> <span class="p">[</span><span class="s">lambda_params</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;:&#39;</span> <span class="o">&amp;</span><span class="nc">FSTRING_MIDDLE</span>  <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;f-string: lambda expressions are not allowed without parentheses&quot;</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_named_expression</span><span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;:=&#39;</span> <span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span>
            <span class="nc">a,</span> <span class="s2">&quot;cannot use assignment expressions with %s&quot;</span><span class="nc">,</span> <span class="nc">_PyPegen_get_expr_name</span><span class="p">(</span><span class="nc">a</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="s1">&#39;=&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="o">|</span><span class="s1">&#39;:=&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;invalid syntax. Maybe you meant &#39;==&#39; or &#39;:=&#39; instead of &#39;=&#39;?&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="o">!</span><span class="p">(</span><span class="nc">list</span><span class="o">|</span><span class="nc">tuple</span><span class="o">|</span><span class="nc">genexp</span><span class="o">|</span><span class="s1">&#39;True&#39;</span><span class="o">|</span><span class="s1">&#39;None&#39;</span><span class="o">|</span><span class="s1">&#39;False&#39;</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nc">bitwise_or</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="o">|</span><span class="s1">&#39;:=&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;cannot assign to %s here. Maybe you meant &#39;==&#39; instead of &#39;=&#39;?&quot;</span><span class="nc">,</span>
                                          <span class="nc">_PyPegen_get_expr_name</span><span class="p">(</span><span class="nc">a</span><span class="p">))</span> <span class="nc">}</span>

<span class="nc">invalid_assignment</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">invalid_ann_assign_target</span> <span class="s1">&#39;:&#39;</span> <span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span>
            <span class="nc">a,</span>
            <span class="s2">&quot;only single target (not %s) can be annotated&quot;</span><span class="nc">,</span>
            <span class="nc">_PyPegen_get_expr_name</span><span class="p">(</span><span class="nc">a</span><span class="p">)</span>
        <span class="p">)</span><span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_named_expression</span> <span class="s1">&#39;,&#39;</span> <span class="nc">star_named_expressions</span><span class="o">*</span> <span class="s1">&#39;:&#39;</span> <span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;only single target (not tuple) can be annotated&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;illegal target for annotation&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">(</span><span class="nc">star_targets</span> <span class="s1">&#39;=&#39;</span><span class="p">)</span><span class="o">*</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="s1">&#39;=&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_INVALID_TARGET</span><span class="p">(</span><span class="nc">STAR_TARGETS,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">(</span><span class="nc">star_targets</span> <span class="s1">&#39;=&#39;</span><span class="p">)</span><span class="o">*</span> <span class="nc">a</span><span class="o">=</span><span class="nc">yield_expr</span> <span class="s1">&#39;=&#39;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;assignment to yield expression not possible&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="nc">augassign</span> <span class="nc">annotated_rhs</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span>
            <span class="nc">a,</span>
            <span class="s2">&quot;&#39;%s&#39; is an illegal expression for augmented assignment&quot;</span><span class="nc">,</span>
            <span class="nc">_PyPegen_get_expr_name</span><span class="p">(</span><span class="nc">a</span><span class="p">)</span>
        <span class="p">)</span><span class="nc">}</span>
<span class="nc">invalid_ann_assign_target</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">list</span>
    <span class="o">|</span> <span class="nc">tuple</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">invalid_ann_assign_target</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">invalid_del_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;del&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_INVALID_TARGET</span><span class="p">(</span><span class="nc">DEL_TARGETS,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_block</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span> <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_comprehension</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">(</span><span class="s1">&#39;[&#39;</span> <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="o">|</span> <span class="s1">&#39;{&#39;</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="nc">starred_expression</span> <span class="nc">for_if_clauses</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;iterable unpacking cannot be used in comprehension&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">(</span><span class="s1">&#39;[&#39;</span> <span class="o">|</span> <span class="s1">&#39;{&#39;</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_named_expression</span> <span class="s1">&#39;,&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">star_named_expressions</span> <span class="nc">for_if_clauses</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">PyPegen_last_item</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">expr_ty</span><span class="p">)</span><span class="nc">,</span>
        <span class="s2">&quot;did you forget parentheses around the comprehension target?&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">(</span><span class="s1">&#39;[&#39;</span> <span class="o">|</span> <span class="s1">&#39;{&#39;</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_named_expression</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;,&#39;</span> <span class="nc">for_if_clauses</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;did you forget parentheses around the comprehension target?&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_dict_comprehension</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;**&#39;</span> <span class="nc">bitwise_or</span> <span class="nc">for_if_clauses</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;dict unpacking cannot be used in dict comprehension&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_parameters</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s2">&quot;/&quot;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;at least one argument must precede /&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">(</span><span class="nc">slash_no_default</span> <span class="o">|</span> <span class="nc">slash_with_default</span><span class="p">)</span> <span class="nc">param_maybe_default</span><span class="o">*</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;/&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;/ may appear only once&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">slash_no_default</span><span class="o">?</span> <span class="nc">param_no_default</span><span class="o">*</span> <span class="nc">invalid_parameters_helper</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_no_default</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;parameter without a default follows parameter with a default&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">param_no_default</span><span class="o">*</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;(&#39;</span> <span class="nc">param_no_default</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;Function parameters cannot be parenthesized&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">(</span><span class="nc">slash_no_default</span> <span class="o">|</span> <span class="nc">slash_with_default</span><span class="p">)</span><span class="o">?</span> <span class="nc">param_maybe_default</span><span class="o">*</span> <span class="s1">&#39;*&#39;</span> <span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="o">|</span> <span class="nc">param_no_default</span><span class="p">)</span> <span class="nc">param_maybe_default</span><span class="o">*</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;/&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;/ must be ahead of *&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">param_maybe_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;expected comma between / and *&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_default</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="o">|</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;expected default value expression&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_star_etc</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="p">(</span><span class="s1">&#39;)&#39;</span> <span class="o">|</span> <span class="s1">&#39;,&#39;</span> <span class="p">(</span><span class="s1">&#39;)&#39;</span> <span class="o">|</span> <span class="s1">&#39;**&#39;</span><span class="p">))</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;named arguments must follow bare *&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">TYPE_COMMENT</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;bare * has associated type comment&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">param</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;var-positional argument cannot have default value&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="p">(</span><span class="nc">param_no_default</span> <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="nc">param_maybe_default</span><span class="o">*</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="p">(</span><span class="nc">param_no_default</span> <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;* argument may appear only once&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_kwds</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">param</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;var-keyword argument cannot have default value&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">param</span> <span class="s1">&#39;,&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;arguments cannot follow var-keyword argument&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">param</span> <span class="s1">&#39;,&#39;</span> <span class="nc">a</span><span class="p">[</span><span class="s">Token*</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="o">|</span><span class="s1">&#39;**&#39;</span><span class="o">|</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;arguments cannot follow var-keyword argument&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_parameters_helper</span><span class="o">:</span> <span class="c1"># This is only there to avoid type errors</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">slash_with_default</span> <span class="nc">{</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">param_with_default</span><span class="o">+</span>
<span class="nc">invalid_lambda_parameters</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s2">&quot;/&quot;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;at least one argument must precede /&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">(</span><span class="nc">lambda_slash_no_default</span> <span class="o">|</span> <span class="nc">lambda_slash_with_default</span><span class="p">)</span> <span class="nc">lambda_param_maybe_default</span><span class="o">*</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;/&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;/ may appear only once&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">lambda_slash_no_default</span><span class="o">?</span> <span class="nc">lambda_param_no_default</span><span class="o">*</span> <span class="nc">invalid_lambda_parameters_helper</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param_no_default</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;parameter without a default follows parameter with a default&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">lambda_param_no_default</span><span class="o">*</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;(&#39;</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">lambda_param</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;Lambda expression parameters cannot be parenthesized&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">(</span><span class="nc">lambda_slash_no_default</span> <span class="o">|</span> <span class="nc">lambda_slash_with_default</span><span class="p">)</span><span class="o">?</span> <span class="nc">lambda_param_maybe_default</span><span class="o">*</span> <span class="s1">&#39;*&#39;</span> <span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="o">|</span> <span class="nc">lambda_param_no_default</span><span class="p">)</span> <span class="nc">lambda_param_maybe_default</span><span class="o">*</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;/&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;/ must be ahead of *&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">lambda_param_maybe_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;expected comma between / and *&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_lambda_parameters_helper</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_slash_with_default</span> <span class="nc">{</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">lambda_param_with_default</span><span class="o">+</span>
<span class="nc">invalid_lambda_star_etc</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="p">(</span><span class="s1">&#39;:&#39;</span> <span class="o">|</span> <span class="s1">&#39;,&#39;</span> <span class="p">(</span><span class="s1">&#39;:&#39;</span> <span class="o">|</span> <span class="s1">&#39;**&#39;</span><span class="p">))</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;named arguments must follow bare *&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">lambda_param</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;var-positional argument cannot have default value&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="p">(</span><span class="nc">lambda_param_no_default</span> <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="nc">lambda_param_maybe_default</span><span class="o">*</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="p">(</span><span class="nc">lambda_param_no_default</span> <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;* argument may appear only once&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_lambda_kwds</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">lambda_param</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;var-keyword argument cannot have default value&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">lambda_param</span> <span class="s1">&#39;,&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;arguments cannot follow var-keyword argument&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">lambda_param</span> <span class="s1">&#39;,&#39;</span> <span class="nc">a</span><span class="p">[</span><span class="s">Token*</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="o">|</span><span class="s1">&#39;**&#39;</span><span class="o">|</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;arguments cannot follow var-keyword argument&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_double_type_comments</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">TYPE_COMMENT</span> <span class="nc">NEWLINE</span> <span class="nc">TYPE_COMMENT</span> <span class="nc">NEWLINE</span> <span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;Cannot have two type comments on def&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_with_item</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">expression</span> <span class="s1">&#39;as&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="o">|</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span> <span class="s1">&#39;:&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_INVALID_TARGET</span><span class="p">(</span><span class="nc">STAR_TARGETS,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_for_target</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;async&#39;</span><span class="o">?</span> <span class="s1">&#39;for&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_INVALID_TARGET</span><span class="p">(</span><span class="nc">FOR_TARGETS,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_group</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">starred_expression</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;cannot use starred expression here&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;**&#39;</span> <span class="nc">expression</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;cannot use double starred expression here&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_import</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;import&#39;</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">dotted_name</span><span class="o">+</span> <span class="s1">&#39;from&#39;</span> <span class="nc">dotted_name</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_STARTING_FROM</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;Did you mean to use &#39;from ... import ...&#39; instead?&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;import&#39;</span> <span class="nc">token</span><span class="o">=</span><span class="nc">NEWLINE</span> <span class="nc">{</span> 
        <span class="nc">RAISE_SYNTAX_ERROR_STARTING_FROM</span><span class="p">(</span><span class="nc">token,</span> <span class="s2">&quot;Expected one or more names after &#39;import&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_import_from_targets</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">import_from_as_names</span> <span class="s1">&#39;,&#39;</span> <span class="nc">NEWLINE</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;trailing comma not allowed without surrounding parentheses&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">token</span><span class="o">=</span><span class="nc">NEWLINE</span> <span class="nc">{</span> 
        <span class="nc">RAISE_SYNTAX_ERROR_STARTING_FROM</span><span class="p">(</span><span class="nc">token,</span> <span class="s2">&quot;Expected one or more names after &#39;import&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_with_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">&#39;async&#39;</span><span class="p">]</span> <span class="s1">&#39;with&#39;</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="p">(</span><span class="nc">expression</span> <span class="p">[</span><span class="s">&#39;as&#39; star_target</span><span class="p">])</span><span class="o">+</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">&#39;async&#39;</span><span class="p">]</span> <span class="s1">&#39;with&#39;</span> <span class="s1">&#39;(&#39;</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="p">(</span><span class="nc">expressions</span> <span class="p">[</span><span class="s">&#39;as&#39; star_target</span><span class="p">])</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_with_stmt_indent</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">&#39;async&#39;</span><span class="p">]</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;with&#39;</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="p">(</span><span class="nc">expression</span> <span class="p">[</span><span class="s">&#39;as&#39; star_target</span><span class="p">])</span><span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;with&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">&#39;async&#39;</span><span class="p">]</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;with&#39;</span> <span class="s1">&#39;(&#39;</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="p">(</span><span class="nc">expressions</span> <span class="p">[</span><span class="s">&#39;as&#39; star_target</span><span class="p">])</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;with&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_try_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;try&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;try&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;try&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">block</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;except&#39;</span> <span class="o">|</span> <span class="s1">&#39;finally&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;except&#39; or &#39;finally&#39; block&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;try&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">block</span><span class="o">*</span> <span class="nc">except_block</span><span class="o">+</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;except&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="nc">expression</span> <span class="p">[</span><span class="s">&#39;as&#39; NAME</span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;cannot have both &#39;except&#39; and &#39;except*&#39; on the same &#39;try&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;try&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">block</span><span class="o">*</span> <span class="nc">except_star_block</span><span class="o">+</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;except&#39;</span> <span class="p">[</span><span class="s">expression [&#39;as&#39; NAME</span><span class="p">]</span>] <span class="s1">&#39;:&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;cannot have both &#39;except&#39; and &#39;except*&#39; on the same &#39;try&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_except_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;except&#39;</span> <span class="s1">&#39;*&#39;</span><span class="o">?</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;,&#39;</span> <span class="nc">expressions</span> <span class="p">[</span><span class="s">&#39;as&#39; NAME </span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_STARTING_FROM</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;multiple exception types must be parenthesized&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;except&#39;</span> <span class="s1">&#39;*&#39;</span><span class="o">?</span> <span class="nc">expression</span> <span class="p">[</span><span class="s">&#39;as&#39; NAME </span><span class="p">]</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;except&#39;</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;except&#39;</span> <span class="s1">&#39;*&#39;</span> <span class="p">(</span><span class="nc">NEWLINE</span> <span class="o">|</span> <span class="s1">&#39;:&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected one or more exception types&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_finally_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;finally&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;finally&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_except_stmt_indent</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;except&#39;</span> <span class="nc">expression</span> <span class="p">[</span><span class="s">&#39;as&#39; NAME </span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;except&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;except&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span> <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;except&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_except_star_stmt_indent</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;except&#39;</span> <span class="s1">&#39;*&#39;</span> <span class="nc">expression</span> <span class="p">[</span><span class="s">&#39;as&#39; NAME </span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;except*&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_match_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="s2">&quot;match&quot;</span> <span class="nc">subject_expr</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">void</span><span class="o">*</span><span class="nc">,</span> <span class="nc">10,</span> <span class="s2">&quot;Pattern matching is&quot;</span><span class="nc">,</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s2">&quot;match&quot;</span> <span class="nc">subject</span><span class="o">=</span><span class="nc">subject_expr</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;match&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_case_block</span><span class="o">:</span>
    <span class="o">|</span> <span class="s2">&quot;case&quot;</span> <span class="nc">patterns</span> <span class="nc">guard</span><span class="o">?</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s2">&quot;case&quot;</span> <span class="nc">patterns</span> <span class="nc">guard</span><span class="o">?</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;case&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_as_pattern</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">or_pattern</span> <span class="s1">&#39;as&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s2">&quot;_&quot;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;cannot use &#39;_&#39; as a target&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">or_pattern</span> <span class="s1">&#39;as&#39;</span> <span class="o">!</span><span class="nc">NAME</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;invalid pattern target&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_class_pattern</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">name_or_attr</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">invalid_class_argument_pattern</span>  <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span>
        <span class="nc">PyPegen_first_item</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">pattern_ty</span><span class="p">)</span><span class="nc">,</span>
        <span class="nc">PyPegen_last_item</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">pattern_ty</span><span class="p">)</span><span class="nc">,</span>
        <span class="s2">&quot;positional patterns follow keyword patterns&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_class_argument_pattern</span><span class="p">[</span><span class="s">asdl_pattern_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">positional_patterns &#39;,&#39;</span><span class="p">]</span> <span class="nc">keyword_patterns</span> <span class="s1">&#39;,&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">positional_patterns</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">invalid_if_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;if&#39;</span> <span class="nc">named_expression</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;if&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;if&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_elif_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;elif&#39;</span> <span class="nc">named_expression</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;elif&#39;</span> <span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;elif&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_else_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;else&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;else&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_while_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;while&#39;</span> <span class="nc">named_expression</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;while&#39;</span> <span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;while&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_for_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">&#39;async&#39;</span><span class="p">]</span> <span class="s1">&#39;for&#39;</span> <span class="nc">star_targets</span> <span class="s1">&#39;in&#39;</span> <span class="nc">star_expressions</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">&#39;async&#39;</span><span class="p">]</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;for&#39;</span> <span class="nc">star_targets</span> <span class="s1">&#39;in&#39;</span> <span class="nc">star_expressions</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;for&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_def_raw</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">&#39;async&#39;</span><span class="p">]</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;def&#39;</span> <span class="nc">NAME</span> <span class="p">[</span><span class="s">type_params</span><span class="p">]</span> <span class="s1">&#39;(&#39;</span> <span class="p">[</span><span class="s">params</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="p">[</span><span class="s">&#39;-&gt;&#39; expression</span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after function definition on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">&#39;async&#39;</span><span class="p">]</span> <span class="s1">&#39;def&#39;</span> <span class="nc">NAME</span> <span class="p">[</span><span class="s">type_params</span><span class="p">]</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;(&#39;</span> <span class="p">[</span><span class="s">params</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="p">[</span><span class="s">&#39;-&gt;&#39; expression</span><span class="p">]</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="p">[</span><span class="s">func_type_comment</span><span class="p">]</span> <span class="nc">block</span>
<span class="nc">invalid_class_def_raw</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;class&#39;</span> <span class="nc">NAME</span> <span class="p">[</span><span class="s">type_params</span><span class="p">]</span> <span class="p">[</span><span class="s">&#39;(&#39; [arguments</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span>] <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;class&#39;</span> <span class="nc">NAME</span> <span class="p">[</span><span class="s">type_params</span><span class="p">]</span> <span class="p">[</span><span class="s">&#39;(&#39; [arguments</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span>] <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after class definition on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_double_starred_kvpairs</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">double_starred_kvpair</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="nc">invalid_kvpair</span>
    <span class="o">|</span> <span class="nc">expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_STARTING_FROM</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;cannot use a starred expression in a dictionary value&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">expression</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;:&#39;</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;}&#39;</span><span class="o">|</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;expression expected after dictionary key and &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_kvpair</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">RAISE_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">PyExc_SyntaxError,</span> <span class="nc">a-&gt;lineno,</span> <span class="nc">a-&gt;end_col_offset</span> <span class="nc">-</span> <span class="nc">1,</span> <span class="nc">a-&gt;end_lineno,</span> <span class="nc">-1,</span> <span class="s2">&quot;&#39;:&#39; expected after dictionary key&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_STARTING_FROM</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;cannot use a starred expression in a dictionary value&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">expression</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;:&#39;</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;}&#39;</span><span class="o">|</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="nc">{RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;expression expected after dictionary key and &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_starred_expression</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="nc">expression</span> <span class="s1">&#39;=&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;cannot assign to iterable argument unpacking&quot;</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_replacement_field</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;f-string: valid expression required before &#39;=&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;!&#39;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;f-string: valid expression required before &#39;!&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;:&#39;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;f-string: valid expression required before &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;}&#39;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;f-string: valid expression required before &#39;}&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="o">!</span><span class="nc">annotated_rhs</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_ON_NEXT_TOKEN</span><span class="p">(</span><span class="s2">&quot;f-string: expecting a valid expression after &#39;{&#39;&quot;</span><span class="p">)</span><span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">annotated_rhs</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;=&#39;</span> <span class="o">|</span> <span class="s1">&#39;!&#39;</span> <span class="o">|</span> <span class="s1">&#39;:&#39;</span> <span class="o">|</span> <span class="s1">&#39;}&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">PyErr_Occurred</span><span class="p">()</span> <span class="o">?</span> <span class="nc">NULL</span> <span class="o">:</span> <span class="nc">RAISE_SYNTAX_ERROR_ON_NEXT_TOKEN</span><span class="p">(</span><span class="s2">&quot;f-string: expecting &#39;=&#39;, or &#39;!&#39;, or &#39;:&#39;, or &#39;}&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">annotated_rhs</span> <span class="s1">&#39;=&#39;</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;!&#39;</span> <span class="o">|</span> <span class="s1">&#39;:&#39;</span> <span class="o">|</span> <span class="s1">&#39;}&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">PyErr_Occurred</span><span class="p">()</span> <span class="o">?</span> <span class="nc">NULL</span> <span class="o">:</span> <span class="nc">RAISE_SYNTAX_ERROR_ON_NEXT_TOKEN</span><span class="p">(</span><span class="s2">&quot;f-string: expecting &#39;!&#39;, or &#39;:&#39;, or &#39;}&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">annotated_rhs</span> <span class="s1">&#39;=&#39;</span><span class="o">?</span> <span class="nc">invalid_conversion_character</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">annotated_rhs</span> <span class="s1">&#39;=&#39;</span><span class="o">?</span> <span class="p">[</span><span class="s">&#39;!&#39; NAME</span><span class="p">]</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;:&#39;</span> <span class="o">|</span> <span class="s1">&#39;}&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">PyErr_Occurred</span><span class="p">()</span> <span class="o">?</span> <span class="nc">NULL</span> <span class="o">:</span> <span class="nc">RAISE_SYNTAX_ERROR_ON_NEXT_TOKEN</span><span class="p">(</span><span class="s2">&quot;f-string: expecting &#39;:&#39; or &#39;}&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">annotated_rhs</span> <span class="s1">&#39;=&#39;</span><span class="o">?</span> <span class="p">[</span><span class="s">&#39;!&#39; NAME</span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">fstring_format_spec</span><span class="o">*</span> <span class="o">!</span><span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">PyErr_Occurred</span><span class="p">()</span> <span class="o">?</span> <span class="nc">NULL</span> <span class="o">:</span> <span class="nc">RAISE_SYNTAX_ERROR_ON_NEXT_TOKEN</span><span class="p">(</span><span class="s2">&quot;f-string: expecting &#39;}&#39;, or format specs&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">annotated_rhs</span> <span class="s1">&#39;=&#39;</span><span class="o">?</span> <span class="p">[</span><span class="s">&#39;!&#39; NAME</span><span class="p">]</span> <span class="o">!</span><span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">PyErr_Occurred</span><span class="p">()</span> <span class="o">?</span> <span class="nc">NULL</span> <span class="o">:</span> <span class="nc">RAISE_SYNTAX_ERROR_ON_NEXT_TOKEN</span><span class="p">(</span><span class="s2">&quot;f-string: expecting &#39;}&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_conversion_character</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;!&#39;</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;:&#39;</span> <span class="o">|</span> <span class="s1">&#39;}&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_ON_NEXT_TOKEN</span><span class="p">(</span><span class="s2">&quot;f-string: missing conversion character&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;!&#39;</span> <span class="o">!</span><span class="nc">NAME</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_ON_NEXT_TOKEN</span><span class="p">(</span><span class="s2">&quot;f-string: invalid conversion character&quot;</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_arithmetic</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">sum</span> <span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="o">|</span><span class="s1">&#39;-&#39;</span><span class="o">|</span><span class="s1">&#39;*&#39;</span><span class="o">|</span><span class="s1">&#39;/&#39;</span><span class="o">|</span><span class="s1">&#39;%&#39;</span><span class="o">|</span><span class="s1">&#39;//&#39;</span><span class="o">|</span><span class="s1">&#39;@&#39;</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;not&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">inversion</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;&#39;not&#39; after an operator must be parenthesized&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_factor</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">(</span><span class="s1">&#39;+&#39;</span> <span class="o">|</span> <span class="s1">&#39;-&#39;</span> <span class="o">|</span> <span class="s1">&#39;~&#39;</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;not&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;&#39;not&#39; after an operator must be parenthesized&quot;</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_type_params</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;[&#39;</span> <span class="nc">token</span><span class="o">=</span><span class="s1">&#39;]&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_STARTING_FROM</span><span class="p">(</span>
            <span class="nc">token,</span> 
            <span class="s2">&quot;Type parameter list cannot be empty&quot;</span><span class="p">)</span><span class="nc">}</span>
</pre></div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./payloads/payload1/Python-3.13.0rc2/Doc/reference"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Thibaut Cantaluppi
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>